{
  "hash": "429b5110b190d63cb531aca036eb9f1c",
  "result": {
    "markdown": "---\ntitle: \"Are California Wildfires Truly Getting Worse?\"\ndescription: \"Visualizing how California wildfires have changed in severity and frequency from 1980 to 2022.\"\nauthor: \n  - name: Amanda Herbst\n    url: https://amandaherbst.github.io/\n    affiliation: MEDS\n    affiliation-url: https://bren.ucsb.edu/masters-programs/master-environmental-data-science/academics-meds\ndate: 03-12-2024\ncategories: [Quarto, MEDS, Data Visualization, R]\nbibliography: references.bib\ncitation:\n  url: https://amandaherbst.github.io/blog/2024-03-12-ca-wildfires/\nimage: tree_fire_clipart.png\ndraft: false\nexecute:\n  warning: FALSE\n  messages: FALSE\nformat:\n    html:\n        code-fold: true\n---\n\n\n# Infographic Background and Creation\n\n## Driving Questions\n\n2020 was California's worst recorded wildfire season since the 17th century, with 9,917 fires burning close to a total of 4 million acres. Lately, there has been a lot of discussion about if California wildfires have gotten worse in recent years (see [here](https://www.scientificamerican.com/article/climate-change-has-made-californias-wildfires-five-times-bigger/) and [here](https://newsroom.ucla.edu/releases/experts-explain-why-california-wildfires-getting-worse)). Therefore, I wanted to conduct my own exploration to answer the *burning* question: **Have California wildfires truly become worse in recent years?** In order to answer this overarching question, I defined three smaller questions to direct my data exploration and visualization:\n\n1.  How has the size of the largest annual fire changed over time (1980 - 2022)?\n2.  How has the total amount of acres burned each month changed over time (1980 - 2022)?\n3.  How has the average number of fires impacting each California county changed since the 1980s?\n\n## The Data\n\n**(1) Fire Data**\n\nI am using [California fire perimeters](https://data.ca.gov/dataset/california-fire-perimeters-all) data from the California Department of Forestry and Fire Protection (CAL FIRE) on the [California Open Data Portal](https://data.ca.gov/). The relevant variables I used in my data visualization include:\n\n-   `YEAR`: year the fire burned\n-   `FIRE_NAME`: given name of fire\n-   `ALARM_DATE`: date the fire first began\n-   `CONT_DATE`: date the fire was declared contained\n-   `GIS_ACRES`: total acres burned by the fire\n-   `geometry`: shape of the perimeter of the full fire\n\n**(2) California County Subdivision TIGER/Line Shapefiles**\n\nAdditionally, I am using [shapefiles](https://data.ca.gov/dataset/ca-geographic-boundaries) from the United States Census Bureau of all counties in the state of California.\n\n## Infographic Plots\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n\n**Clean data**\n\n::: {.cell}\n\n```{.r .cell-code}\n# county data ---\n# clean names \nca_counties_clean <- ca_counties %>% \n  janitor::clean_names() %>% \n  # select relevant columns\n  select(name, geometry)\n\n# fire data ----\n# clean names\nca_fires_clean <- ca_fires_shape %>% janitor::clean_names() %>% \n  # select necessary columns\n  select(year, fire_name, alarm_date, cont_date, gis_acres, geometry) \n\n# Spatially join data to find what counties were impacted by what fires\nca_county_fires <- st_join(ca_fires_clean, ca_counties_clean) %>% \n  rename(county_name = name)\n```\n:::\n\n\n**Fonts and color palette**\n\n::: {.cell}\n\n```{.r .cell-code}\n# import fonts\nfont_add_google(name = \"Quicksand\", family = \"Quicksand\")\n\n# enable {showtext} for rendering\nshowtext_auto()\n\n# define red to be used throughout\nred <- \"#FE4A49\"\n\n# define diverging color palette for choropleth map\nfire_pal <- c(\"#FE4A49\",\n              \"#FF7944\",\n              \"#F7F3E3\",\n              \"#C0D6E9\",\n              \"#5791C4\")\n```\n:::\n\n\n### How has the size of the largest annual fire changed over time (1980 - 2022)?\n\nTo answer this first question, I created a histogram of the total acres burned by the largest fire recorded each year so that I could compare across the 40 years. I added a dashed line at the number of acres burned by the average largest fire in that timeframe so that we could see if there is a pattern over time of when the fires exceed that average value. Additionally, I used `gghighlight` to highlight the 3 largest fires that burned between 1980 and 2022, all of which happened in the past 6 years.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# select largest fires each year\nca_largest_fires <- ca_fires_clean %>% \n  st_drop_geometry() %>% \n  # select years 1980-2022\n  filter(year %in% (1980:2022)) %>% \n  # Majority of biscuit fire burned in Oregon so removing it\n  filter(fire_name != \"BISCUIT\") %>% \n  group_by(year) %>% \n  # select largest (by acres) for each year\n  slice_max(order_by = gis_acres, n = 1)\n\n# create plot\nlargest_fires <- ggplot(data = ca_largest_fires) +\n  # add horizontal line at the average size of the largest fire from 1908-2022\n  geom_hline(yintercept = mean(ca_largest_fires$gis_acres),\n             color = \"white\",\n             linetype = \"dashed\") +\n  # add columns indicating how large each fire was\n  geom_col(aes(x = year, y = gis_acres), fill = red) +\n  gghighlight(year %in% c(2018, 2020, 2021)) +\n  labs(y = \"Total Acres Burned\",\n       x = \"\",\n       title = \"Largest Recorded California Wildfires (1980-2022)\",\n       subtitle = \"The top 3 largest wildfires have burned in the last 6 years\") +\n  # choose x axis labels\n  scale_x_discrete(breaks = c(1980, 1985, 1990, 1995, 2000, 2005, 2010, 2015, 2020)) +\n  # add commas to large numbers on y-axis\n  scale_y_continuous(labels = scales::label_comma(),\n                     expand = c(0,0),\n                     limits = c(0, 1100000)) +\n  # add annotation to label the average line\n  annotate(\n    geom = \"text\",\n    # coord for text to live\n    x = 1, y = 280000,\n    label = \"Size of average largest fire in the last 40 years\",\n    size = 16,\n    family = \"Quicksand\",\n    fontface = 2,\n    color = \"white\",\n    # so it doesn't run off plot space\n    hjust = \"inward\"\n  ) +\n  # add arrow from annotation to average line\n  annotate(\n    geom = \"curve\",\n    x = 11.5, xend = 14,\n    y = 235000, yend = 160000,\n    curvature = -0.15,\n    arrow = arrow(length = unit(0.3, \"cm\")),\n    linewidth = 1,\n    color = \"white\"\n  ) +\n  # label Ranch Fire\n  annotate(\n    geom = \"text\",\n    x = 27, y = 445000,\n    label = \"Ranch Fire (410,203 acres)\",\n    color = red,\n    size = 16,\n    family = \"Quicksand\",\n    fontface = 2\n  ) +\n  # add arrow to Ranch Fire annotation\n  annotate(\n    geom = \"curve\",\n    x = 33, xend = 38,\n    y = 440000, yend = 375000,\n    curvature = 0.1,\n    arrow = arrow(length = unit(0.3, \"cm\")),\n    color = red,\n    linewidth = 1\n  ) +\n  # label August Complex Fire\n  annotate(\n    geom = \"text\",\n    x = 30, y = 800000,\n    label= \"August Complex Fire (1,032,699 acres)\",\n    color = red,\n    size = 16,\n    family = \"Quicksand\",\n    fontface = 2\n  ) +\n  # add arrow to August Complex Fire annotation\n  annotate(\n    geom = \"curve\",\n    x = 36, xend = 40,\n    y = 750000, yend = 700000,\n    curvature = 0.5,\n    arrow = arrow(length = unit(0.3, \"cm\")),\n    color = red,\n    linewidth = 1\n  ) +\n  # label Dixie Fire\n  annotate(\n    geom = \"text\",\n    x = 33, y = 1050000,\n    label= \"Dixie Fire (963,405 acres)\",\n    color = red,\n    size = 16,\n    family = \"Quicksand\",\n    fontface = 2\n  ) +\n  # add arrow to Dixie Fire annotation\n  annotate(\n    geom = \"curve\",\n    x = 38.5, xend = 42,\n    y = 1050000, yend = 974000,\n    curvature = -0.6,\n    arrow = arrow(length = unit(0.3, \"cm\")),\n    color = red,\n    linewidth = 1\n  ) +\n  theme( \n    # remove unnecessary gridlines\n    panel.grid.major.x = element_blank(),\n    panel.grid.minor.y = element_blank(),\n    # thinner y-axis gridlines\n    panel.grid.major.y = element_line(linewidth = 0.25),\n    # define title size, fontface, margins, and adjust left\n    plot.title = element_text(size = 56,\n                              face = \"bold\", \n                              margin = margin(t = 0, r = 0, \n                                              b = 0.25, l = 0, \n                                              unit= \"cm\"),\n                              hjust = 0),\n    # define subtitle size and adjust left\n    plot.subtitle = element_text(size = 48,\n                                 hjust = 0),\n    # black plot background\n    plot.background = element_rect(fill = \"black\",\n                                   color = \"black\"),\n    # black panel background\n    panel.background = element_rect(fill = \"black\"),\n    # define white color and font family for all text\n    text = element_text(color = \"white\", family = \"Quicksand\"),\n    # define axis title and text size\n    axis.title = element_text(size = 45),\n    axis.text = element_text(color = \"white\", size = 40),\n    # define color of x axis line and tick marks\n    axis.ticks.x = element_line(color = \"white\"),\n    axis.line.x = element_line(color = \"white\"),\n    # adjust aspect ratio to widen plot\n    aspect.ratio = 0.35\n  )\n\nlargest_fires\n```\n:::\n\n\n![](largest_fires.png)\n\n### How has the total amount of acres burned each month changed over time (1980 - 2022)?\n\nThis plot was inspired by Christophe Nicault's [Tidy Tuesday visualization](https://github.com/cnicault/tidytuesday?tab=readme-ov-file#2022-week-44---horror-movies). Since all of my plots include a time element, I wanted to experiment with demonstrating that time element in a different way for each plot. The colors used by Nicault looked just like fire to me and I loved the circular plot for showing time on a monthly scale. Therefore, I used Nicault's code as a framework to build a similar plot to investigate how many acres were burned each month across California and across the years 1980 to 2022.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# create table with total acres burned each month from 1980-2022\ncalendar <- ca_fires_clean %>% \n  # drop geometries\n  st_drop_geometry() %>% \n  # convert year to date\n  mutate(year = as.Date(year, format = \"%Y\")) %>% \n  mutate(year = year(year)) %>%\n  # select 1980-2022\n  filter(year %in% c(1980:2022)) %>% \n  # grab month out of fire alarm date\n  mutate(month = month(alarm_date)) %>%\n  group_by(year, month) %>%  \n  # calculate total acres burned each month of each year\n  summarise(monthly_total = sum(gis_acres)) %>%  \n  ungroup()\n\n# duplicate january for the circular plot\nmonth13 <- calendar %>%  \n  filter(month == 1) %>%  \n  mutate(year = (year - 1),\n         month = 13)\n\n# designate where month labels will go\ndates_axis <- tibble(x = seq(1,12,1),\n                     y = c(rep(2000000,7), 3000000, rep(2000000, 4)),\n                     mth = lubridate::month(seq(1,12,1), abbr=TRUE, label = TRUE))\n\n# create plot\nmonthly <- calendar %>%   \n  bind_rows(month13) %>% \n  bind_rows(month13) %>%   # https://stackoverflow.com/questions/66821598/why-is-ggplot-geom-ribbon-area-failing-with-facets-coord-polar-with-specific\n  arrange(desc(year)) %>% \n  ggplot(aes(month, monthly_total, group = year, fill = year, alpha = 2040-year))+\n  # area plot of total acres burned monthly\n  geom_area(position=\"identity\", alpha = 0.2) +\n  # outline area plot\n  geom_line(aes(color = year), linewidth = 0.1, alpha = 1) +\n  # add month labels\n  geom_text(data=dates_axis, aes(x = x, y = y, label = mth), color =\"white\",\n            inherit.aes = FALSE, size = 12) +\n  # polar coordinates for circle\n  coord_polar(start = pi) +\n  # choose color gradient\n  scale_fill_gradient(low = \"yellow\", high = \"#FE4A49\")+\n  scale_color_gradient(low = \"yellow\", high = \"#FE4A49\")+\n  scale_y_continuous(limits = c(0,3000000), \n                     # expand center of circle\n                     expand = expansion(mult = c(0.3, 0))\n  ) +\n  # define breaks along x axis for each month\n  scale_x_continuous(breaks = seq(1,12,1), \n                     limits = c(1,13), \n                     labels = lubridate::month(seq(1,12,1), \n                                               abbr=TRUE, \n                                               label = TRUE))+\n  # remove axes, etc.\n  theme_void()+\n  guides(color = \"none\", alpha = \"none\",\n         # adjust length and height of color bar\n         fill = guide_colorbar(barwidth = 16, barheight = 0.2)) +\n  labs(title = \"Monthly acres burned by wildfires (1980-2022)\",\n       fill = \"\") +\n  theme(legend.direction = \"horizontal\",\n        legend.position = \"top\",\n        # define color and font family for all text\n        text = element_text(color = \"white\", family = \"Quicksand\"),\n        # define size, fontface, margin and center title\n        plot.title = element_text(size = 38,\n                                  face = \"bold\", \n                                  hjust = 0.5,\n                                  margin = margin(t = 0.25, r = 0, \n                                                  b = 0.5, l = 0, \n                                                  unit = \"cm\")),\n        # define size of legend text\n        legend.text = element_text(size = 22),\n        # define margins of legend to decrease black space between legend and plot\n        legend.box.margin = margin(t = 0, r = 0, b = -1, l = 0, unit = \"cm\"),\n        # black plot background\n        panel.background = element_rect(fill = \"black\"),\n        plot.background = element_rect(fill = \"black\"),\n        plot.margin = margin(unit(c(0, 0, 0, 0), \"cm\"))) +\n  # add annotation for largest amount of acres burned in one month\n  annotate(\n    geom = \"text\",\n    x = 8.65, y = 2900000,\n    label= \"2.9 mil acres (Aug 2020)\",\n    color = red,\n    size = 10, family = \"Quicksand\",\n    face = \"bold\")\n\n\nmonthly\n```\n:::\n\n\n![](sun_plot.png)\n\n### How has the average number of fires impacting each California county changed since the 1980s?\n\nThe first two plots were focusing more on severity of fires, so I wanted this plot to investigate the frequency of fires, i.e. are fires getting larger AND happening more often? To do this I spatially joined the fire and county data to find what counties were impacted by what fires. From there, I was able to count how many fires impacted each county each year. In order to compare over time, I calculated the average number of fires that impacted each county over the 1980s and the 2010s (I didn't use the 2020s because I wanted a full decade of data). I subtracted the average in the 1980s from the average in the 2010s to find the change in fire frequency. I plotted this as a choropleth map, color each California county by the change in average number of fires impacting them. Positive values indicated that on average more fires affected those counties in the 2010s and negative values indicated that on average less fires affected those counties in the 2010s. \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# count average number of fires occurring in each county 1980s\ncounty_counts_80 <- ca_county_fires %>% \n  st_drop_geometry() %>% \n  filter(year %in% c(1980:1989)) %>% \n  group_by(county_name, year) %>% \n  summarize(sum_80 = n()) %>% \n  group_by(county_name) %>% \n  summarize(avg_num_80 = round(mean(sum_80, na.rm = TRUE), 2)) %>% \n  rename(name = county_name)\n\n# count average number of fires occurring in each county 2010s\ncounty_counts_10 <- ca_county_fires %>% \n  st_drop_geometry() %>% \n  filter(year %in% c(2010:2019)) %>% \n  group_by(county_name, year) %>% \n  summarize(sum_10 = n()) %>% \n  group_by(county_name) %>% \n  summarize(avg_num_10 = round(mean(sum_10, na.rm = TRUE), 2)) %>% \n  rename(name = county_name)\n\n# join average number of fires from each decade and calculate difference\ncounty_counts <- full_join(county_counts_10, county_counts_80)\ncounty_change <- county_counts %>% \n  mutate(change = avg_num_10 - avg_num_80)\n\n# remove small islands\nca_counties_clean_no_island <- ca_counties_clean %>% ms_filter_islands(min_area = 1e13)\n\n# add fire counts to county dataset\nca_counties_counts <- full_join(ca_counties_clean_no_island, county_change)\n\n# define title and subtitle\ntitle <- \"Change in the Number of Wildfires Affecting California Counties\"\nsubtitle <- \"The difference between the average number of wildfires in the 2010s and the 1980s, per county, where a negative value indicates a decrease in fires over time and a positive value indicates an increase in fires over time.\"\n\n# create choropleth map\nmap_change <- ggplot() +\n  geom_sf(data = ca_counties_counts, \n          aes(fill = change),\n          color = \"black\") +\n  scale_fill_gradientn(colors = rev(fire_pal),\n                       na.value = \"grey70\",\n                       # make sure white is at 0\n                       values = scales::rescale(x = c(\n                         min(na.omit(ca_counties_counts)$change),\n                         0,\n                         max(na.omit(ca_counties_counts)$change)\n                       ))) +\n  # add title and subtitle\n  labs(title = str_wrap(title, 50),\n       subtitle = str_wrap(subtitle, 60),\n       fill = \"\") +\n  theme_void() +\n  guides(fill = guide_colorbar(barwidth = 20, barheight = 0.75)) +\n  theme(legend.position = \"bottom\",\n        # define title font family, font face, size, margins, and center\n        plot.title = element_text(family = \"Quicksand\", \n                                  face = \"bold\", \n                                  size = 48,\n                                  margin = margin(t = 0.25, r = 0, \n                                                  b = 0.25, l = 0, \n                                                  unit = \"cm\"),\n                                  hjust = 0.5),\n        # define subtitle font family, size and center\n        plot.subtitle = element_text(family = \"Quicksand\", size = 36, hjust = 0.5),\n        # black plot background\n        plot.background = element_rect(fill = \"black\",\n                                       color = \"black\"),\n        # legend text color, size, and font family\n        legend.title = element_text(color = \"white\"),\n        legend.text = element_text(color = \"white\", family = \"Quicksand\", size = 12),\n        text = element_text(color = \"white\"))\n\nmap_change\n```\n:::\n\n\n![ca_choropleth](ca_diff.png)\n\n### Final Infographic\n\nI joined all the plots together into a final infographic. Outside of R, I added some fire icons as well as a couple annotations with major takeaways from my visuals.\n\n![](final_infographic.png)\n\n## Design Elements\n\n**Graphic form**: The histogram was the best way to compare the acres burned by the largest fires each year across time. I wanted to include a visualization with the map of California since this was the study area, so I found that a choropleth map was the best way to do this. Lastly, I was inspired by this (insert link) plot because it both looked a bit like fire and was a unique way to plot across time that I hadn’t encountered before. I wanted to stretch myself, so I used Christophe Nicault’s code as a guiding framework to build my own.\n\n**Text**: I used the same typeface across all of my plots, increasing the size and bolding titles and important words. Additionally, I added annotations to my histogram and circular plot in a fire red color I used throughout my infographic to provide specific values and more information.\n\n**Themes**: Since this is an infographic, I removed as many axes and unnecessary theme elements as possible to keep my plots simple and, hopefully, easily interpretable. Since I was using “fire” colors such as bright yellow and orange, especially in my circular plot, I plotted everything against a black background for more emphasis.\n\n**Colors**: As I mentioned briefly above, I used a lot of bright reds, yellows, and oranges to simulate fire. I used a black background so that the bright colors are easily seen and look more fire-like. For my choropleth map, I am plotting negative and positive values, so I created a divergent color gradient. I used bright red to indicate large positive numbers (an increase in average number of fires) and blue to indicate large negative numbers (a decrease in average number of fires). I chose blue because the color is typically associated with coolness and water, which I believe are opposites of fire.\n\n**Typography**: The typeface I chose, Quicksand, had many font options available and is sans serif. This was ideal because it makes it easier for audiences to read, and I feel like it adds a casualness to the infographic that I hope will make it less intimidating to audiences that are less familiar with interpreting data visualizations.\n\n**General design**: I made the overall title the largest size and additionally made the written takeaways from each plot a larger size so that they could not be missed. I limited my subtitles to only pertinent information and kept the takeaways concise to avoid information overload. I made the choropleth map large enough to serve both as a reminder that this data is about California and so that the audience can clearly interpret color differences. \n\n**Contextualization**: The California map, colors used throughout, and the fire images all work together to contextualize the California wildfire data. \n\n**Centering your primary message**: I had so many ways I wanted to present this data, but I focused each of my plots on investigating change over time of either severity or frequency of fires. As written in my takeaway annotations, it is hard to say for sure, but it appears that California wildfires have increased in both frequency and severity since 1980.\n\n**Considering accessibility**: The colors I used are colorblind-friendly and I ensured that all text and background colors meet or exceed the contrast ratio of 4.5:1. I have added alt text to my final infographic.\n\n**Applying a DEI lens**: The infographic was designed so that someone with little knowledge of California wildfires could understand if the fires are getting worse. I took a very broad approach by visualizing across the entirety of the state, but I would need to do more if this exploration were to be used to direct future actions related to wildfires as communities that are underrepresented are often the most vulnerable to these wildfires. \n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}