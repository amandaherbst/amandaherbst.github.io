[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Amanda Herbst",
    "section": "",
    "text": "Hi there! I am currently a graduate student in the Bren school’s Master of Environmental Data Science program at the University of California, Santa Barbara."
  },
  {
    "objectID": "index.html#intro",
    "href": "index.html#intro",
    "title": "Amanda Herbst",
    "section": "",
    "text": "My name is Amanda Herbst and this is where I will put my bio"
  },
  {
    "objectID": "index.html#education",
    "href": "index.html#education",
    "title": "Amanda Herbst",
    "section": "Education",
    "text": "Education\nMaster of Environmental Data Science, UCSB (expected 2024)\nBS, Chemistry, minor in Dance, Cal Poly SLO (2022)"
  },
  {
    "objectID": "index.html#experience",
    "href": "index.html#experience",
    "title": "Amanda Herbst",
    "section": "Experience",
    "text": "Experience"
  },
  {
    "objectID": "blog/2023-10-23-my-first-post/index.html",
    "href": "blog/2023-10-23-my-first-post/index.html",
    "title": "My first blog post",
    "section": "",
    "text": "Time to blog!1\ninsert interesting things here!"
  },
  {
    "objectID": "blog/2023-10-23-my-first-post/index.html#this-is-my-first-section",
    "href": "blog/2023-10-23-my-first-post/index.html#this-is-my-first-section",
    "title": "My first blog post",
    "section": "",
    "text": "Time to blog!1\ninsert interesting things here!"
  },
  {
    "objectID": "blog/2023-10-23-my-first-post/index.html#this-is-my-second-section",
    "href": "blog/2023-10-23-my-first-post/index.html#this-is-my-second-section",
    "title": "My first blog post",
    "section": "This is my second section",
    "text": "This is my second section\nHello world!2\nI learned everything I know about blogging here (Csik 2022).\nI’m citing another resource here (Gaynor et al. 2022)."
  },
  {
    "objectID": "blog/2023-10-23-my-first-post/index.html#footnotes",
    "href": "blog/2023-10-23-my-first-post/index.html#footnotes",
    "title": "My first blog post",
    "section": "Footnotes",
    "text": "Footnotes\n\n\na footnote!↩︎\nThis is an inline footnote :)↩︎"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "In 2022, I graduated from California Polytechnic State University, San Luis Obispo (Cal Poly SLO) with a bachelor’s degree in Chemistry and a minor in Dance. During my undergraduate career, I participated in research at Cal Poly SLO in ocean carbonate chemistry, where I was involved in all steps of creating and maintaining an oceanographic time series. In the summer of 2021, I participated in an NSF-funded Research Experience for Undergraduates (REU) program at the University of Rhode Island Graduate School of Oceanography. As a research intern, I created a reproducible workflow to post-calibrate continuous chlorophyll-a data collected from six seasonal transect cruises conducted off the coast of Rhode Island. My project was part of the Northeast U.S. Shelf Long-Term Ecological Research (NES-LTER) site and introduced me to the fascinating work of collaborating and synthesizing data to understand the environments around us. Read more about my project here! Overall, I’m interested in using data science to collaboratively characterize natural environments and understand the impacts of a changing climate."
  },
  {
    "objectID": "blog.html",
    "href": "blog.html",
    "title": "Blog",
    "section": "",
    "text": "Are California Wildfires Truly Getting Worse?\n\n\n\nQuarto\n\n\nMEDS\n\n\nData Visualization\n\n\nR\n\n\n\nVisualizing how California wildfires have changed in severity and frequency from 1980 to 2022.\n\n\n\nAmanda Herbst\n\n\nMar 12, 2024\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nHistoric redlining and biodiveristy observations in Los Angeles County\n\n\n\nQuarto\n\n\nMEDS\n\n\nGeospatial\n\n\nR\n\n\n\nA workflow investigating the impact of historical redlining in the county of Los Angeles on environmental (in)justice and the location and frequency of reported bird…\n\n\n\nAmanda Herbst\n\n\nDec 15, 2023\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nVisualization of Thomas Fire Impact on Santa Barbara\n\n\n\nQuarto\n\n\nMEDS\n\n\nPython\n\n\nGeospatial\n\n\n\nInvestigating and visualizing the impacts of the 2017 Thomas Fire on the air and land quality in Santa Barbara county\n\n\n\nAmanda Herbst\n\n\nDec 13, 2023\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRelationship between chlorophyll-a and nutrients in the Santa Barbara Channel\n\n\n\nQuarto\n\n\nMEDS\n\n\nStatistics\n\n\nRegression Model\n\n\nR\n\n\n\nCharacterizing a statistically significant overall relationship between chlorophyll-a and phosphate and dissolved inorganic nitrogen.\n\n\n\nAmanda Herbst\n\n\nOct 23, 2023\n\n\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "blog/2023-12-23-eds220-thomas-fire/hwk4-task3-thomas-fire.html",
    "href": "blog/2023-12-23-eds220-thomas-fire/hwk4-task3-thomas-fire.html",
    "title": "ipynb rendered as html",
    "section": "",
    "text": "Amanda Herbst\nLink to GitHub repository: https://github.com/amandaherbst/eds220-thomas-fire\n\n\nThe Thomas fire was a huge wildfire that burned a large part of Santa Barbara and Ventura counties during December 2017, and was the largest recorded California wildfire at the time. The following analysis gives insight on the drastic impacts it had on the local air quality, as well as the land area it burned.\n\n\n\n\nFetch vector data from an online repository\nTime series analysis\nVisualize raster data\nFalse color imagery\n\n\n\n\n(1) Air Quality Index (AQI)\nOutdoor daily air quality measurements in Santa Barbara County in 2017 and 2018 were retrieved from the US Environmental Protection Agency.\n(2) Landsat raster data\nA simplified collection of bands (red, green, blue, near-infrared and shortwave infrared) from the Landsat Collection 2 Level-2 atmosperically corrected surface reflectance data, collected by the Landsat 8 satellite. The data was accessed and pre-processed in the Microsoft Planetary Computer to remove data outside land and coarsen the spatial resolution (Landsat Collection in MPC). Data should be used for visualization purposes only.\n(3) Fire Perimeters\nA shapefile of fire perimeters in California during 2017, from the CA state geoportal.\n\n\n\n\nUS EPA Daily AQI Data Accessed Oct 25, 2023\nLandsat 8 satellite surface reflectance data, from MPC Landsat collection Accessed Nov 28, 2023\n2017 CA fire perimeter shapefile Accessed November 28, 2023\n\n\n\n\n\n\nCode\n# import libraries\nimport os\nimport pandas as pd\nimport xarray as xr\nimport numpy as np\n\nimport geopandas as gpd\nimport rioxarray as rioxr\nimport matplotlib.pyplot as plt\nimport matplotlib.lines as mlines\n\n\n\n\n\n\n\nCode\n# read in 2017 and 2018 air quality data\naqi_17 = pd.read_csv('https://aqs.epa.gov/aqsweb/airdata/daily_aqi_by_county_2017.zip')\naqi_18 = pd.read_csv('https://aqs.epa.gov/aqsweb/airdata/daily_aqi_by_county_2018.zip')\n\n# import landsat raster data by calling a filepath\nlandsat = rioxr.open_rasterio(os.path.join(os.getcwd(),'data', 'landsat8-2018-01-26-sb-simplified.nc'))\n\n# import ca fire perimeters\nca_fire = gpd.read_file('data/California_Fire_Perimeters_2017/California_Fire_Perimeters_2017.shp')\n\n\n\n\n\nSanta Barbara county is located on the coast of Southern California (coordinates: 34.6099° N, 120.0665° W) and has a Mediterranean biome that has recently experienced prolonged droughts and is prone to wildfires.\n\n\n\nTake a look at the initial data:\n\n\nCode\n# look at aqi 2017 dataframe\naqi_17.head()\n\n\n\n\n\n\n\n\n\nState Name\ncounty Name\nState Code\nCounty Code\nDate\nAQI\nCategory\nDefining Parameter\nDefining Site\nNumber of Sites Reporting\n\n\n\n\n0\nAlabama\nBaldwin\n1\n3\n2017-01-01\n21\nGood\nPM2.5\n01-003-0010\n1\n\n\n1\nAlabama\nBaldwin\n1\n3\n2017-01-04\n22\nGood\nPM2.5\n01-003-0010\n1\n\n\n2\nAlabama\nBaldwin\n1\n3\n2017-01-10\n19\nGood\nPM2.5\n01-003-0010\n1\n\n\n3\nAlabama\nBaldwin\n1\n3\n2017-01-13\n30\nGood\nPM2.5\n01-003-0010\n1\n\n\n4\nAlabama\nBaldwin\n1\n3\n2017-01-16\n16\nGood\nPM2.5\n01-003-0010\n1\n\n\n\n\n\n\n\n\n\nCode\n# look at aqi 2018 dataframe\naqi_18.head()\n\n\n\n\n\n\n\n\n\nState Name\ncounty Name\nState Code\nCounty Code\nDate\nAQI\nCategory\nDefining Parameter\nDefining Site\nNumber of Sites Reporting\n\n\n\n\n0\nAlabama\nBaldwin\n1\n3\n2018-01-02\n32\nGood\nPM2.5\n01-003-0010\n1\n\n\n1\nAlabama\nBaldwin\n1\n3\n2018-01-05\n34\nGood\nPM2.5\n01-003-0010\n1\n\n\n2\nAlabama\nBaldwin\n1\n3\n2018-01-08\n15\nGood\nPM2.5\n01-003-0010\n1\n\n\n3\nAlabama\nBaldwin\n1\n3\n2018-01-11\n19\nGood\nPM2.5\n01-003-0010\n1\n\n\n4\nAlabama\nBaldwin\n1\n3\n2018-01-14\n25\nGood\nPM2.5\n01-003-0010\n1\n\n\n\n\n\n\n\n\n\nCode\n# look at raster data\nlandsat\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;xarray.Dataset&gt;\nDimensions:      (y: 731, x: 870, band: 1)\nCoordinates:\n  * y            (y) float64 3.952e+06 3.952e+06 ... 3.756e+06 3.755e+06\n  * x            (x) float64 1.213e+05 1.216e+05 ... 3.557e+05 3.559e+05\n  * band         (band) int64 1\n    spatial_ref  int64 0\nData variables:\n    red          (band, y, x) float64 ...\n    green        (band, y, x) float64 ...\n    blue         (band, y, x) float64 ...\n    nir08        (band, y, x) float64 ...\n    swir22       (band, y, x) float64 ...xarray.DatasetDimensions:y: 731x: 870band: 1Coordinates: (4)y(y)float643.952e+06 3.952e+06 ... 3.755e+06axis :Ycrs :EPSG:32611long_name :y coordinate of projectionresolution :-30standard_name :projection_y_coordinateunits :metre_FillValue :nanarray([3952395., 3952125., 3951855., ..., 3755835., 3755565., 3755295.])x(x)float641.213e+05 1.216e+05 ... 3.559e+05axis :Xcrs :EPSG:32611long_name :x coordinate of projectionresolution :30standard_name :projection_x_coordinateunits :metre_FillValue :nanarray([121305., 121575., 121845., ..., 355395., 355665., 355935.])band(band)int641array([1])spatial_ref()int640crs_wkt :PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563]],PRIMEM[\"Greenwich\",0],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]semi_major_axis :6378137.0semi_minor_axis :6356752.314245179inverse_flattening :298.257223563reference_ellipsoid_name :WGS 84longitude_of_prime_meridian :0.0prime_meridian_name :Greenwichgeographic_crs_name :WGS 84horizontal_datum_name :World Geodetic System 1984projected_crs_name :WGS 84 / UTM zone 11Ngrid_mapping_name :transverse_mercatorlatitude_of_projection_origin :0.0longitude_of_central_meridian :-117.0false_easting :500000.0false_northing :0.0scale_factor_at_central_meridian :0.9996spatial_ref :PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563]],PRIMEM[\"Greenwich\",0],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]GeoTransform :121170.0 270.0 0.0 3952530.0 0.0 -270.0array(0)Data variables: (5)red(band, y, x)float64...add_offset :0.0coordinates :timescale_factor :1.0_FillValue :0.0[635970 values with dtype=float64]green(band, y, x)float64...add_offset :0.0coordinates :timescale_factor :1.0_FillValue :0.0[635970 values with dtype=float64]blue(band, y, x)float64...add_offset :0.0coordinates :timescale_factor :1.0_FillValue :0.0[635970 values with dtype=float64]nir08(band, y, x)float64...add_offset :0.0coordinates :timescale_factor :1.0_FillValue :0.0[635970 values with dtype=float64]swir22(band, y, x)float64...add_offset :0.0coordinates :timescale_factor :1.0_FillValue :0.0[635970 values with dtype=float64]Attributes: (0)\n\n\n\n\nCode\n# look at ca_fire head\nca_fire.head()\n\n\n\n\n\n\n\n\n\nindex\nOBJECTID\nYEAR_\nSTATE\nAGENCY\nUNIT_ID\nFIRE_NAME\nINC_NUM\nALARM_DATE\nCONT_DATE\n...\nGIS_ACRES\nCOMMENTS\nCOMPLEX_NA\nCOMPLEX_IN\nIRWINID\nFIRE_NUM\nDECADES\nSHAPE_Leng\nSHAPE_Area\ngeometry\n\n\n\n\n0\n19836\n41429\n2017\nCA\nCCO\nVNC\nBROOK\n00042450\n2017-05-23\n2017-05-24\n...\n10.043819\nper walked track\nNone\nNone\nNone\nNone\n2010\n1246.055781\n59473.666651\nPOLYGON ((-13229812.974 4046876.486, -13229786...\n\n\n1\n19837\n41430\n2017\nCA\nCCO\nVNC\nPACIFIC\n00075307\n2017-09-09\n2017-09-09\n...\n1.190109\nFinal Walked track. Small spot to the north east\nNone\nNone\nNone\nNone\n2010\n561.418202\n7081.369481\nPOLYGON ((-13286872.985 4074523.355, -13286895...\n\n\n2\n19838\n41431\n2017\nCA\nCCO\nVNC\nGRADE\n00054660\n2017-07-04\n2017-07-05\n...\n47.194027\nNone\nNone\nNone\nNone\nNone\n2010\n2587.259697\n279911.825212\nPOLYGON ((-13244637.580 4056332.530, -13244620...\n\n\n3\n19839\n41432\n2017\nCA\nCCO\nVNC\nPACIFICA\n00051791\n2017-06-24\n2017-06-24\n...\n1.158548\nGPS track\nNone\nNone\nNone\nNone\n2010\n501.178102\n6859.664843\nPOLYGON ((-13229521.754 4046254.111, -13229510...\n\n\n4\n19840\n41433\n2017\nCA\nCCO\nVNC\nMONTVIEW\n00040196\n2017-05-15\n2017-05-15\n...\n2.893327\nRough per description. waiting for walked GPS...\nNone\nNone\nNone\nNone\n2010\n484.388887\n17133.006159\nPOLYGON ((-13229663.036 4046858.853, -13229667...\n\n\n\n\n5 rows × 23 columns\n\n\n\nAdditional preliminary exploration:\n\n\nCode\n# check dimensions of air quality data \nprint(\"AQI 2017 dims: \", aqi_17.shape)\nprint(\"AQI 2018 dims: \", aqi_18.shape)\n\n\nAQI 2017 dims:  (326801, 10)\nAQI 2018 dims:  (327537, 10)\n\n\n\n\nCode\n# check crs for raster and shapefile data\nprint('landsat CRS:', landsat.rio.crs)\nprint('CA Fire Perimeter CRS:', ca_fire.crs)\n\n\nlandsat CRS: EPSG:32611\nCA Fire Perimeter CRS: epsg:3857\n\n\n\n\nCode\n# plot ca fires\nca_fire.plot()\n\n\n&lt;AxesSubplot:&gt;\n\n\n\n\n\n\n\nCode\n# plot a band in landsat\nlandsat['swir22'].plot()\n\n\n&lt;matplotlib.collections.QuadMesh at 0x7fe8d22892e0&gt;\n\n\n\n\n\n\n\n\n\n\n\n\nCode\n# join the aqi datasets together\naqi = pd.concat([aqi_17, aqi_18])\n\n# check dimensions to make verify concatenation\naqi.shape\n\n\n(654338, 10)\n\n\n\n\nCode\n# tidy aqi column names\naqi.columns = aqi.columns.str.lower().str.replace(' ','_')\n# filter by county name, and then only keep necessary columns\naqi_sb = aqi[aqi.county_name == 'Santa Barbara'].loc[:,'date':'number_of_sites_reporting']\n# verify selected columns and tidy format\naqi_sb.columns\n\n\nIndex(['date', 'aqi', 'category', 'defining_parameter', 'defining_site',\n       'number_of_sites_reporting'],\n      dtype='object')\n\n\n\n\nCode\n# convert date column from string to timestamps\naqi_sb.date = pd.to_datetime(aqi_sb.date)\n\n# check column data types to verify datetime conversion\naqi_sb.dtypes\n\n\ndate                         datetime64[ns]\naqi                                   int64\ncategory                             object\ndefining_parameter                   object\ndefining_site                        object\nnumber_of_sites_reporting             int64\ndtype: object\n\n\n\n\nCode\n# set the date column to be the index\naqi_sb = aqi_sb.set_index('date')\n# check dtype of index to verify\ntype(aqi_sb.index)\n\n\npandas.core.indexes.datetimes.DatetimeIndex\n\n\n\n\nCode\n# create new column to store the rolling 5 day averages of AQI\naqi_sb['five_day_average'] = aqi_sb.aqi.rolling('5D').mean()\n\n\n\n\n\n\n\nCode\n# drop extra dimension \nlandsat = landsat.squeeze().drop('band')\n# verify only x and y dimension and coordinates\nprint(landsat.dims, landsat.coords)\n\n\nFrozen({'y': 731, 'x': 870}) Coordinates:\n  * y            (y) float64 3.952e+06 3.952e+06 ... 3.756e+06 3.755e+06\n  * x            (x) float64 1.213e+05 1.216e+05 ... 3.557e+05 3.559e+05\n    spatial_ref  int64 0\n\n\n\n\nCode\n# update ca_fire column names to lowercase\nca_fire.columns = ca_fire.columns.str.lower()\n\n\n\n\nCode\n# Reproject shapefile to raster CRS for plotting\nca_fire = ca_fire.to_crs(landsat.rio.crs)\n# verify reprojection\nca_fire.crs == landsat.rio.crs\n\n\nTrue\n\n\n\n\nCode\n# select thomas fire from ca fire perimeters for easier plotting\nthomas = ca_fire[ca_fire.fire_name == \"THOMAS\"]\n# verify only thomas fire selected\nthomas.fire_name.unique()\n\n\narray(['THOMAS'], dtype=object)\n\n\n\n\n\n\n\n\n\n\nCode\n# plot daily AQI and 5-day average with updated labels, title, and colors\naqi_sb.plot(y = ['aqi', 'five_day_average'],\n            xlabel = 'Date',\n            ylabel = 'AQI',\n            color = {'aqi':'lightgreen',\n                    'five_day_average':'darkgreen'},\n            title = 'Air Quality Index in Santa Barbara County (2017-2018)')\nplt.show()\n\n\n\n\n\n\n\n\n\n\nCode\n# map false color image with thomas fire perimeter\nfig, ax = plt.subplots()\n\n# plot false color image\nlandsat[['swir22','nir08','red']].to_array().plot.imshow(robust = True,\n                                                        ax = ax)\n# plot thomas fire perimeter in red\nthomas.boundary.plot(ax = ax,\n            color = \"red\",\n                    linewidth = 0.8)\n# create thomas fire patch for legend\nthomas_patch = mlines.Line2D([],[],\n                             color = \"red\",\n                             linestyle = \"-\",\n                             label = \"Thomas Fire Perimeter\")\n\n# add legend to label thomas fire perimeter\nax.legend(handles = [thomas_patch], \n          frameon = True,\n         loc = 'upper right')\n\n# add map title\nplt.title('Santa Barbara Thomas Fire (2017)')\n\n# turn off axes\nax.axis('off')\n\nplt.show()"
  },
  {
    "objectID": "blog/2023-12-23-eds220-thomas-fire/hwk4-task3-thomas-fire.html#import-libraries-and-functions",
    "href": "blog/2023-12-23-eds220-thomas-fire/hwk4-task3-thomas-fire.html#import-libraries-and-functions",
    "title": "ipynb rendered as html",
    "section": "",
    "text": "Code\n# import libraries\nimport os\nimport pandas as pd\nimport xarray as xr\nimport numpy as np\n\nimport geopandas as gpd\nimport rioxarray as rioxr\nimport matplotlib.pyplot as plt\nimport matplotlib.lines as mlines"
  },
  {
    "objectID": "blog/2023-12-23-eds220-thomas-fire/hwk4-task3-thomas-fire.html#import-data",
    "href": "blog/2023-12-23-eds220-thomas-fire/hwk4-task3-thomas-fire.html#import-data",
    "title": "ipynb rendered as html",
    "section": "",
    "text": "Code\n# read in 2017 and 2018 air quality data\naqi_17 = pd.read_csv('https://aqs.epa.gov/aqsweb/airdata/daily_aqi_by_county_2017.zip')\naqi_18 = pd.read_csv('https://aqs.epa.gov/aqsweb/airdata/daily_aqi_by_county_2018.zip')\n\n# import landsat raster data by calling a filepath\nlandsat = rioxr.open_rasterio(os.path.join(os.getcwd(),'data', 'landsat8-2018-01-26-sb-simplified.nc'))\n\n# import ca fire perimeters\nca_fire = gpd.read_file('data/California_Fire_Perimeters_2017/California_Fire_Perimeters_2017.shp')"
  },
  {
    "objectID": "blog/2023-12-23-eds220-thomas-fire/hwk4-task3-thomas-fire.html#geographical-context-of-data",
    "href": "blog/2023-12-23-eds220-thomas-fire/hwk4-task3-thomas-fire.html#geographical-context-of-data",
    "title": "ipynb rendered as html",
    "section": "",
    "text": "Santa Barbara county is located on the coast of Southern California (coordinates: 34.6099° N, 120.0665° W) and has a Mediterranean biome that has recently experienced prolonged droughts and is prone to wildfires."
  },
  {
    "objectID": "blog/2023-12-23-eds220-thomas-fire/hwk4-task3-thomas-fire.html#data-exploration",
    "href": "blog/2023-12-23-eds220-thomas-fire/hwk4-task3-thomas-fire.html#data-exploration",
    "title": "ipynb rendered as html",
    "section": "",
    "text": "Take a look at the initial data:\n\n\nCode\n# look at aqi 2017 dataframe\naqi_17.head()\n\n\n\n\n\n\n\n\n\nState Name\ncounty Name\nState Code\nCounty Code\nDate\nAQI\nCategory\nDefining Parameter\nDefining Site\nNumber of Sites Reporting\n\n\n\n\n0\nAlabama\nBaldwin\n1\n3\n2017-01-01\n21\nGood\nPM2.5\n01-003-0010\n1\n\n\n1\nAlabama\nBaldwin\n1\n3\n2017-01-04\n22\nGood\nPM2.5\n01-003-0010\n1\n\n\n2\nAlabama\nBaldwin\n1\n3\n2017-01-10\n19\nGood\nPM2.5\n01-003-0010\n1\n\n\n3\nAlabama\nBaldwin\n1\n3\n2017-01-13\n30\nGood\nPM2.5\n01-003-0010\n1\n\n\n4\nAlabama\nBaldwin\n1\n3\n2017-01-16\n16\nGood\nPM2.5\n01-003-0010\n1\n\n\n\n\n\n\n\n\n\nCode\n# look at aqi 2018 dataframe\naqi_18.head()\n\n\n\n\n\n\n\n\n\nState Name\ncounty Name\nState Code\nCounty Code\nDate\nAQI\nCategory\nDefining Parameter\nDefining Site\nNumber of Sites Reporting\n\n\n\n\n0\nAlabama\nBaldwin\n1\n3\n2018-01-02\n32\nGood\nPM2.5\n01-003-0010\n1\n\n\n1\nAlabama\nBaldwin\n1\n3\n2018-01-05\n34\nGood\nPM2.5\n01-003-0010\n1\n\n\n2\nAlabama\nBaldwin\n1\n3\n2018-01-08\n15\nGood\nPM2.5\n01-003-0010\n1\n\n\n3\nAlabama\nBaldwin\n1\n3\n2018-01-11\n19\nGood\nPM2.5\n01-003-0010\n1\n\n\n4\nAlabama\nBaldwin\n1\n3\n2018-01-14\n25\nGood\nPM2.5\n01-003-0010\n1\n\n\n\n\n\n\n\n\n\nCode\n# look at raster data\nlandsat\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;xarray.Dataset&gt;\nDimensions:      (y: 731, x: 870, band: 1)\nCoordinates:\n  * y            (y) float64 3.952e+06 3.952e+06 ... 3.756e+06 3.755e+06\n  * x            (x) float64 1.213e+05 1.216e+05 ... 3.557e+05 3.559e+05\n  * band         (band) int64 1\n    spatial_ref  int64 0\nData variables:\n    red          (band, y, x) float64 ...\n    green        (band, y, x) float64 ...\n    blue         (band, y, x) float64 ...\n    nir08        (band, y, x) float64 ...\n    swir22       (band, y, x) float64 ...xarray.DatasetDimensions:y: 731x: 870band: 1Coordinates: (4)y(y)float643.952e+06 3.952e+06 ... 3.755e+06axis :Ycrs :EPSG:32611long_name :y coordinate of projectionresolution :-30standard_name :projection_y_coordinateunits :metre_FillValue :nanarray([3952395., 3952125., 3951855., ..., 3755835., 3755565., 3755295.])x(x)float641.213e+05 1.216e+05 ... 3.559e+05axis :Xcrs :EPSG:32611long_name :x coordinate of projectionresolution :30standard_name :projection_x_coordinateunits :metre_FillValue :nanarray([121305., 121575., 121845., ..., 355395., 355665., 355935.])band(band)int641array([1])spatial_ref()int640crs_wkt :PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563]],PRIMEM[\"Greenwich\",0],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]semi_major_axis :6378137.0semi_minor_axis :6356752.314245179inverse_flattening :298.257223563reference_ellipsoid_name :WGS 84longitude_of_prime_meridian :0.0prime_meridian_name :Greenwichgeographic_crs_name :WGS 84horizontal_datum_name :World Geodetic System 1984projected_crs_name :WGS 84 / UTM zone 11Ngrid_mapping_name :transverse_mercatorlatitude_of_projection_origin :0.0longitude_of_central_meridian :-117.0false_easting :500000.0false_northing :0.0scale_factor_at_central_meridian :0.9996spatial_ref :PROJCS[\"WGS 84 / UTM zone 11N\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563]],PRIMEM[\"Greenwich\",0],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-117],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32611\"]]GeoTransform :121170.0 270.0 0.0 3952530.0 0.0 -270.0array(0)Data variables: (5)red(band, y, x)float64...add_offset :0.0coordinates :timescale_factor :1.0_FillValue :0.0[635970 values with dtype=float64]green(band, y, x)float64...add_offset :0.0coordinates :timescale_factor :1.0_FillValue :0.0[635970 values with dtype=float64]blue(band, y, x)float64...add_offset :0.0coordinates :timescale_factor :1.0_FillValue :0.0[635970 values with dtype=float64]nir08(band, y, x)float64...add_offset :0.0coordinates :timescale_factor :1.0_FillValue :0.0[635970 values with dtype=float64]swir22(band, y, x)float64...add_offset :0.0coordinates :timescale_factor :1.0_FillValue :0.0[635970 values with dtype=float64]Attributes: (0)\n\n\n\n\nCode\n# look at ca_fire head\nca_fire.head()\n\n\n\n\n\n\n\n\n\nindex\nOBJECTID\nYEAR_\nSTATE\nAGENCY\nUNIT_ID\nFIRE_NAME\nINC_NUM\nALARM_DATE\nCONT_DATE\n...\nGIS_ACRES\nCOMMENTS\nCOMPLEX_NA\nCOMPLEX_IN\nIRWINID\nFIRE_NUM\nDECADES\nSHAPE_Leng\nSHAPE_Area\ngeometry\n\n\n\n\n0\n19836\n41429\n2017\nCA\nCCO\nVNC\nBROOK\n00042450\n2017-05-23\n2017-05-24\n...\n10.043819\nper walked track\nNone\nNone\nNone\nNone\n2010\n1246.055781\n59473.666651\nPOLYGON ((-13229812.974 4046876.486, -13229786...\n\n\n1\n19837\n41430\n2017\nCA\nCCO\nVNC\nPACIFIC\n00075307\n2017-09-09\n2017-09-09\n...\n1.190109\nFinal Walked track. Small spot to the north east\nNone\nNone\nNone\nNone\n2010\n561.418202\n7081.369481\nPOLYGON ((-13286872.985 4074523.355, -13286895...\n\n\n2\n19838\n41431\n2017\nCA\nCCO\nVNC\nGRADE\n00054660\n2017-07-04\n2017-07-05\n...\n47.194027\nNone\nNone\nNone\nNone\nNone\n2010\n2587.259697\n279911.825212\nPOLYGON ((-13244637.580 4056332.530, -13244620...\n\n\n3\n19839\n41432\n2017\nCA\nCCO\nVNC\nPACIFICA\n00051791\n2017-06-24\n2017-06-24\n...\n1.158548\nGPS track\nNone\nNone\nNone\nNone\n2010\n501.178102\n6859.664843\nPOLYGON ((-13229521.754 4046254.111, -13229510...\n\n\n4\n19840\n41433\n2017\nCA\nCCO\nVNC\nMONTVIEW\n00040196\n2017-05-15\n2017-05-15\n...\n2.893327\nRough per description. waiting for walked GPS...\nNone\nNone\nNone\nNone\n2010\n484.388887\n17133.006159\nPOLYGON ((-13229663.036 4046858.853, -13229667...\n\n\n\n\n5 rows × 23 columns\n\n\n\nAdditional preliminary exploration:\n\n\nCode\n# check dimensions of air quality data \nprint(\"AQI 2017 dims: \", aqi_17.shape)\nprint(\"AQI 2018 dims: \", aqi_18.shape)\n\n\nAQI 2017 dims:  (326801, 10)\nAQI 2018 dims:  (327537, 10)\n\n\n\n\nCode\n# check crs for raster and shapefile data\nprint('landsat CRS:', landsat.rio.crs)\nprint('CA Fire Perimeter CRS:', ca_fire.crs)\n\n\nlandsat CRS: EPSG:32611\nCA Fire Perimeter CRS: epsg:3857\n\n\n\n\nCode\n# plot ca fires\nca_fire.plot()\n\n\n&lt;AxesSubplot:&gt;\n\n\n\n\n\n\n\nCode\n# plot a band in landsat\nlandsat['swir22'].plot()\n\n\n&lt;matplotlib.collections.QuadMesh at 0x7fe8d22892e0&gt;"
  },
  {
    "objectID": "blog/2023-12-23-eds220-thomas-fire/hwk4-task3-thomas-fire.html#analysis",
    "href": "blog/2023-12-23-eds220-thomas-fire/hwk4-task3-thomas-fire.html#analysis",
    "title": "ipynb rendered as html",
    "section": "",
    "text": "Code\n# join the aqi datasets together\naqi = pd.concat([aqi_17, aqi_18])\n\n# check dimensions to make verify concatenation\naqi.shape\n\n\n(654338, 10)\n\n\n\n\nCode\n# tidy aqi column names\naqi.columns = aqi.columns.str.lower().str.replace(' ','_')\n# filter by county name, and then only keep necessary columns\naqi_sb = aqi[aqi.county_name == 'Santa Barbara'].loc[:,'date':'number_of_sites_reporting']\n# verify selected columns and tidy format\naqi_sb.columns\n\n\nIndex(['date', 'aqi', 'category', 'defining_parameter', 'defining_site',\n       'number_of_sites_reporting'],\n      dtype='object')\n\n\n\n\nCode\n# convert date column from string to timestamps\naqi_sb.date = pd.to_datetime(aqi_sb.date)\n\n# check column data types to verify datetime conversion\naqi_sb.dtypes\n\n\ndate                         datetime64[ns]\naqi                                   int64\ncategory                             object\ndefining_parameter                   object\ndefining_site                        object\nnumber_of_sites_reporting             int64\ndtype: object\n\n\n\n\nCode\n# set the date column to be the index\naqi_sb = aqi_sb.set_index('date')\n# check dtype of index to verify\ntype(aqi_sb.index)\n\n\npandas.core.indexes.datetimes.DatetimeIndex\n\n\n\n\nCode\n# create new column to store the rolling 5 day averages of AQI\naqi_sb['five_day_average'] = aqi_sb.aqi.rolling('5D').mean()\n\n\n\n\n\n\n\nCode\n# drop extra dimension \nlandsat = landsat.squeeze().drop('band')\n# verify only x and y dimension and coordinates\nprint(landsat.dims, landsat.coords)\n\n\nFrozen({'y': 731, 'x': 870}) Coordinates:\n  * y            (y) float64 3.952e+06 3.952e+06 ... 3.756e+06 3.755e+06\n  * x            (x) float64 1.213e+05 1.216e+05 ... 3.557e+05 3.559e+05\n    spatial_ref  int64 0\n\n\n\n\nCode\n# update ca_fire column names to lowercase\nca_fire.columns = ca_fire.columns.str.lower()\n\n\n\n\nCode\n# Reproject shapefile to raster CRS for plotting\nca_fire = ca_fire.to_crs(landsat.rio.crs)\n# verify reprojection\nca_fire.crs == landsat.rio.crs\n\n\nTrue\n\n\n\n\nCode\n# select thomas fire from ca fire perimeters for easier plotting\nthomas = ca_fire[ca_fire.fire_name == \"THOMAS\"]\n# verify only thomas fire selected\nthomas.fire_name.unique()\n\n\narray(['THOMAS'], dtype=object)"
  },
  {
    "objectID": "blog/2023-12-23-eds220-thomas-fire/hwk4-task3-thomas-fire.html#final-output",
    "href": "blog/2023-12-23-eds220-thomas-fire/hwk4-task3-thomas-fire.html#final-output",
    "title": "ipynb rendered as html",
    "section": "",
    "text": "Code\n# plot daily AQI and 5-day average with updated labels, title, and colors\naqi_sb.plot(y = ['aqi', 'five_day_average'],\n            xlabel = 'Date',\n            ylabel = 'AQI',\n            color = {'aqi':'lightgreen',\n                    'five_day_average':'darkgreen'},\n            title = 'Air Quality Index in Santa Barbara County (2017-2018)')\nplt.show()\n\n\n\n\n\n\n\n\n\n\nCode\n# map false color image with thomas fire perimeter\nfig, ax = plt.subplots()\n\n# plot false color image\nlandsat[['swir22','nir08','red']].to_array().plot.imshow(robust = True,\n                                                        ax = ax)\n# plot thomas fire perimeter in red\nthomas.boundary.plot(ax = ax,\n            color = \"red\",\n                    linewidth = 0.8)\n# create thomas fire patch for legend\nthomas_patch = mlines.Line2D([],[],\n                             color = \"red\",\n                             linestyle = \"-\",\n                             label = \"Thomas Fire Perimeter\")\n\n# add legend to label thomas fire perimeter\nax.legend(handles = [thomas_patch], \n          frameon = True,\n         loc = 'upper right')\n\n# add map title\nplt.title('Santa Barbara Thomas Fire (2017)')\n\n# turn off axes\nax.axis('off')\n\nplt.show()"
  },
  {
    "objectID": "blog/2023-12-23-eds220-thomas-fire/thomas-fire-analysis-blog.html",
    "href": "blog/2023-12-23-eds220-thomas-fire/thomas-fire-analysis-blog.html",
    "title": "Visualization of Thomas Fire Impact on Santa Barbara",
    "section": "",
    "text": "Amanda Herbst\nLink to GitHub repository: https://github.com/amandaherbst/eds220-thomas-fire\n\n\n\nThomas fire\n\n\n\n\n\n\nThe Thomas fire was a huge wildfire that burned a large part of Santa Barbara and Ventura counties during December 2017, and was the largest recorded California wildfire at the time. Residents of both counties and beyond were greatly affected by the destruction of their homes, widespread evacuations, and schools shutting down. The following analysis gives insight on the drastic impacts the Thomas fire had on the local air quality, as well as the land area it burned.\n\n\n\n\nFetch vector data from an online repository\nTime series analysis\nVisualize raster data\nFalse color imagery\nPlotting with Matplotlib.pyplot\n\n\n\n\n(1) Air Quality Index (AQI)\nOutdoor daily air quality measurements in US counties can be retrieved from the US Environmental Protection Agency (EPA). It can then be filtered to a county (or counties) of interest–in this case, Santa Barbara county.\n(2) Landsat raster data\nThe raster data was accessed and preprocessed in the Microsoft Planetary Computer from their Landsat Collection 2 Level-2 dataset. It contains a simplified collection of red, green, blue, near-infrared, and shortwave infrared bands that were collected by the Landsat 8 satellite.\n(3) CA Fire Perimeters\nSince the majority of the Thomas Fire burned during December 2017, I accessed the shapefiles of fire perimeters in California during 2017, provided by CAL FIRE.\n\n\n\nUS Environmental Protection Agency (2023). Daily AQI by County [Data File]. Available from https://aqs.epa.gov/aqsweb/airdata/download_files.html#AQI. Accessed October 25, 2023\nMicrosoft Planetary Computer. Landsat Collection 2 Level-2 [Dataset]. Available from https://planetarycomputer.microsoft.com/dataset/landsat-c2-l2. Accessed November 28, 2023\nCalifornia Department of Forestry and Fire Protection (2023). California Fire Perimeters (all) [Data File]. Available from https://gis.data.ca.gov/datasets/CALFIRE-Forestry::california-fire-perimeters-all-1/about. Accessed November 28, 2023\n\n\n\n\n\n\nCode\nimport os\nimport pandas as pd\n\nimport geopandas as gpd\nimport rioxarray as rioxr\nimport matplotlib.pyplot as plt\nimport matplotlib.lines as mlines\n\n\n\n\n\nThe air quality data can be accessed via URL. The Landsat raster data and California fire perimeters were downloaded and stored in a local folder which is accessed directly.\n\n\nCode\n# 2017 and 2018 air quality data\naqi_17 = pd.read_csv('https://aqs.epa.gov/aqsweb/airdata/daily_aqi_by_county_2017.zip')\naqi_18 = pd.read_csv('https://aqs.epa.gov/aqsweb/airdata/daily_aqi_by_county_2018.zip')\n\n# import landsat raster data by calling a filepath with os\nlandsat = rioxr.open_rasterio(os.path.join(os.getcwd(),'data', 'landsat8-2018-01-26-sb-simplified.nc'))\n\n# ca fire perimeters\nca_fire = gpd.read_file('data/California_Fire_Perimeters_2017/California_Fire_Perimeters_2017.shp')\n\n\n\n\n\nSanta Barbara county is located on the coast of Southern California (coordinates: 34.6099° N, 120.0665° W) and has a Mediterranean biome that has recently experienced prolonged droughts and is prone to wildfires.\n\n\n\nOn December 4, 2017 some particularly high winds created an electrical arc between multiple power lines and the Thomas Fire resulted, burning for a month and a half. As the fire made its way up the coast of California, it blanketed the surrounding cities in a thick cloud of smoke and ash. The following analyis visualizes the air quality in Santa Barbara county during 2017 and 2018.\n\n\nThe air quality data I acquired from the US EPA includes all counties, so it needs to be filtered to Santa Barbara county in addition to general tidying of column names. Tidying and converting the date column to the index is useful for plotting, as well as calculating a rolling average.\n\n\nCode\n# join the aqi datasets together\naqi = pd.concat([aqi_17, aqi_18])\n\n# tidy aqi column names\naqi.columns = aqi.columns.str.lower().str.replace(' ','_')\n\n# filter by county name, only keeping necessary columns\naqi_sb = aqi[aqi.county_name == 'Santa Barbara'].loc[:,'date':'number_of_sites_reporting']\n\n# convert date column from string to timestamps\naqi_sb.date = pd.to_datetime(aqi_sb.date)\n\n# set the date column to be the index\naqi_sb = aqi_sb.set_index('date')\n\n# create new column to store the rolling 5 day averages of AQI\naqi_sb['five_day_average'] = aqi_sb.aqi.rolling('5D').mean()\n\n\n\n\n\n\nThe following plot shows the daily air quality (light green) in Santa Barbara county from 2017 - 2018 as well as a 5-day rolling average (dark green) to demonstrate mean AQI levels on a 5 day scale.\n\n\nCode\n# plot daily AQI and 5-day average with updated labels, title, and colors\naqi_sb.plot(y = ['aqi', 'five_day_average'],\n            xlabel = 'Date',\n            ylabel = 'AQI',\n            color = {'aqi':'lightgreen',\n                    'five_day_average':'darkgreen'},\n            title = 'Air Quality Index in Santa Barbara County (2017-2018)')\n\nplt.show()\n\n\n\n\n\nWe can see a huge spike in December 2017 that coincides with the timeline of the Thomas Fire. According to AirNow, an AQI above 150 is considered Unhealthy for the general population, and over 200 is Very Unhealthy. The daily measurements during the Thomas Fire peak at well over 250, and the average measurements peak at 200. Therefore, most if not all, residents of Santa Barbara county were exposed to very high health risks for the duration of the Thomas Fire.\n\n\n\nIn total, the Thomas Fire burned 281,893 acres over 40 days. When heavy rainfall came down in the early hours of January 9th, 2018, the recently burned, and therefore destabilized, foothills of Santa Barbara crumbled and led to a devastating mudslide in the town of Montecito. The following analysis will visualize the full perimeter of the fire, along with the burn scar it left behind.\n\n\n\n\nThe Landsat raster data contains an extra band and coordinates that are not necessary for this analysis so we will drop them for more efficient processing.\n\n\nCode\n# drop extra dimension \nlandsat = landsat.squeeze().drop('band')\n\n\n\n\n\nThe CA fire perimeter shapefiles require some tidying before we reproject to the same coordinate reference system (CRS) as the Landsat raster data. Reprojection is necessary for accurate plotting. The final step is selecting our fire of interest–the Thomas Fire.\n\n\nCode\n# update ca_fire column names to lowercase\nca_fire.columns = ca_fire.columns.str.lower()\n\n# Reproject shapefile to raster CRS for plotting\nca_fire = ca_fire.to_crs(landsat.rio.crs)\n\n# select thomas fire from ca fire perimeters for easier plotting\nthomas = ca_fire[ca_fire.fire_name == \"THOMAS\"]\n\n\n\n\n\n\n\nWe will map the Thomas Fire perimeter (in red) on top of a false color image of Santa Barbara County. We are using the shortwave infrared, near-infrared, and red bands from the Landsat raster. With this combination of bands, we will be able to clearly see any burned area in red.\n\n\nCode\n# map false color image with thomas fire perimeter\nfig, ax = plt.subplots()\n\n# plot false color image\nlandsat[['swir22','nir08','red']].to_array().plot.imshow(robust = True,\n                                                        ax = ax)\n# plot thomas fire perimeter in red\nthomas.boundary.plot(ax = ax,\n            color = \"red\",\n                    linewidth = 0.8)\n\n# create thomas fire patch for legend\nthomas_patch = mlines.Line2D([],[],\n                             color = \"red\",\n                             linestyle = \"-\",\n                             label = \"Thomas Fire Perimeter\")\n\n# add legend to label thomas fire perimeter\nax.legend(handles = [thomas_patch], \n          frameon = True,\n         loc = 'upper right')\n\n# add map title\nplt.title('Santa Barbara Thomas Fire (2017)')\n\n# turn off axes\nax.axis('off')\n\nplt.show()\n\n\n\n\n\nThe Thomas Fire perimeter almost perfectly encompasses the burn scar it left behind, which is the large area colored red.\n\n\n\nLet’s take one last look at our analysis results:\n \nThe Thomas Fire had a very large impact on Santa Barbara county both while it was burning, and after it was finally contained. We saw a huge spike in the air quality–at unhealthy and very unhealthy levels during December 2017. Additionally, the fire left a huge burn scar that consequently led to another devastating natural disaster."
  },
  {
    "objectID": "blog/2023-12-23-eds220-thomas-fire/thomas-fire-analysis-blog.html#about-the-analysis",
    "href": "blog/2023-12-23-eds220-thomas-fire/thomas-fire-analysis-blog.html#about-the-analysis",
    "title": "Visualization of Thomas Fire Impact on Santa Barbara",
    "section": "",
    "text": "The Thomas fire was a huge wildfire that burned a large part of Santa Barbara and Ventura counties during December 2017, and was the largest recorded California wildfire at the time. Residents of both counties and beyond were greatly affected by the destruction of their homes, widespread evacuations, and schools shutting down. The following analysis gives insight on the drastic impacts the Thomas fire had on the local air quality, as well as the land area it burned.\n\n\n\n\nFetch vector data from an online repository\nTime series analysis\nVisualize raster data\nFalse color imagery\nPlotting with Matplotlib.pyplot\n\n\n\n\n(1) Air Quality Index (AQI)\nOutdoor daily air quality measurements in US counties can be retrieved from the US Environmental Protection Agency (EPA). It can then be filtered to a county (or counties) of interest–in this case, Santa Barbara county.\n(2) Landsat raster data\nThe raster data was accessed and preprocessed in the Microsoft Planetary Computer from their Landsat Collection 2 Level-2 dataset. It contains a simplified collection of red, green, blue, near-infrared, and shortwave infrared bands that were collected by the Landsat 8 satellite.\n(3) CA Fire Perimeters\nSince the majority of the Thomas Fire burned during December 2017, I accessed the shapefiles of fire perimeters in California during 2017, provided by CAL FIRE.\n\n\n\nUS Environmental Protection Agency (2023). Daily AQI by County [Data File]. Available from https://aqs.epa.gov/aqsweb/airdata/download_files.html#AQI. Accessed October 25, 2023\nMicrosoft Planetary Computer. Landsat Collection 2 Level-2 [Dataset]. Available from https://planetarycomputer.microsoft.com/dataset/landsat-c2-l2. Accessed November 28, 2023\nCalifornia Department of Forestry and Fire Protection (2023). California Fire Perimeters (all) [Data File]. Available from https://gis.data.ca.gov/datasets/CALFIRE-Forestry::california-fire-perimeters-all-1/about. Accessed November 28, 2023"
  },
  {
    "objectID": "blog/2023-12-23-eds220-thomas-fire/thomas-fire-analysis-blog.html#importing-libraries-and-functions",
    "href": "blog/2023-12-23-eds220-thomas-fire/thomas-fire-analysis-blog.html#importing-libraries-and-functions",
    "title": "Visualization of Thomas Fire Impact on Santa Barbara",
    "section": "",
    "text": "Code\nimport os\nimport pandas as pd\n\nimport geopandas as gpd\nimport rioxarray as rioxr\nimport matplotlib.pyplot as plt\nimport matplotlib.lines as mlines"
  },
  {
    "objectID": "blog/2023-12-23-eds220-thomas-fire/thomas-fire-analysis-blog.html#importing-the-data",
    "href": "blog/2023-12-23-eds220-thomas-fire/thomas-fire-analysis-blog.html#importing-the-data",
    "title": "Visualization of Thomas Fire Impact on Santa Barbara",
    "section": "",
    "text": "The air quality data can be accessed via URL. The Landsat raster data and California fire perimeters were downloaded and stored in a local folder which is accessed directly.\n\n\nCode\n# 2017 and 2018 air quality data\naqi_17 = pd.read_csv('https://aqs.epa.gov/aqsweb/airdata/daily_aqi_by_county_2017.zip')\naqi_18 = pd.read_csv('https://aqs.epa.gov/aqsweb/airdata/daily_aqi_by_county_2018.zip')\n\n# import landsat raster data by calling a filepath with os\nlandsat = rioxr.open_rasterio(os.path.join(os.getcwd(),'data', 'landsat8-2018-01-26-sb-simplified.nc'))\n\n# ca fire perimeters\nca_fire = gpd.read_file('data/California_Fire_Perimeters_2017/California_Fire_Perimeters_2017.shp')"
  },
  {
    "objectID": "blog/2023-12-23-eds220-thomas-fire/thomas-fire-analysis-blog.html#geographical-context-of-data",
    "href": "blog/2023-12-23-eds220-thomas-fire/thomas-fire-analysis-blog.html#geographical-context-of-data",
    "title": "Visualization of Thomas Fire Impact on Santa Barbara",
    "section": "",
    "text": "Santa Barbara county is located on the coast of Southern California (coordinates: 34.6099° N, 120.0665° W) and has a Mediterranean biome that has recently experienced prolonged droughts and is prone to wildfires."
  },
  {
    "objectID": "blog/2023-12-23-eds220-thomas-fire/thomas-fire-analysis-blog.html#analyzing-impact-on-air-quality",
    "href": "blog/2023-12-23-eds220-thomas-fire/thomas-fire-analysis-blog.html#analyzing-impact-on-air-quality",
    "title": "Visualization of Thomas Fire Impact on Santa Barbara",
    "section": "",
    "text": "On December 4, 2017 some particularly high winds created an electrical arc between multiple power lines and the Thomas Fire resulted, burning for a month and a half. As the fire made its way up the coast of California, it blanketed the surrounding cities in a thick cloud of smoke and ash. The following analyis visualizes the air quality in Santa Barbara county during 2017 and 2018.\n\n\nThe air quality data I acquired from the US EPA includes all counties, so it needs to be filtered to Santa Barbara county in addition to general tidying of column names. Tidying and converting the date column to the index is useful for plotting, as well as calculating a rolling average.\n\n\nCode\n# join the aqi datasets together\naqi = pd.concat([aqi_17, aqi_18])\n\n# tidy aqi column names\naqi.columns = aqi.columns.str.lower().str.replace(' ','_')\n\n# filter by county name, only keeping necessary columns\naqi_sb = aqi[aqi.county_name == 'Santa Barbara'].loc[:,'date':'number_of_sites_reporting']\n\n# convert date column from string to timestamps\naqi_sb.date = pd.to_datetime(aqi_sb.date)\n\n# set the date column to be the index\naqi_sb = aqi_sb.set_index('date')\n\n# create new column to store the rolling 5 day averages of AQI\naqi_sb['five_day_average'] = aqi_sb.aqi.rolling('5D').mean()"
  },
  {
    "objectID": "blog/2023-12-23-eds220-thomas-fire/thomas-fire-analysis-blog.html#plot-santa-barbara-county-aqi-2017-2018",
    "href": "blog/2023-12-23-eds220-thomas-fire/thomas-fire-analysis-blog.html#plot-santa-barbara-county-aqi-2017-2018",
    "title": "Visualization of Thomas Fire Impact on Santa Barbara",
    "section": "",
    "text": "The following plot shows the daily air quality (light green) in Santa Barbara county from 2017 - 2018 as well as a 5-day rolling average (dark green) to demonstrate mean AQI levels on a 5 day scale.\n\n\nCode\n# plot daily AQI and 5-day average with updated labels, title, and colors\naqi_sb.plot(y = ['aqi', 'five_day_average'],\n            xlabel = 'Date',\n            ylabel = 'AQI',\n            color = {'aqi':'lightgreen',\n                    'five_day_average':'darkgreen'},\n            title = 'Air Quality Index in Santa Barbara County (2017-2018)')\n\nplt.show()\n\n\n\n\n\nWe can see a huge spike in December 2017 that coincides with the timeline of the Thomas Fire. According to AirNow, an AQI above 150 is considered Unhealthy for the general population, and over 200 is Very Unhealthy. The daily measurements during the Thomas Fire peak at well over 250, and the average measurements peak at 200. Therefore, most if not all, residents of Santa Barbara county were exposed to very high health risks for the duration of the Thomas Fire."
  },
  {
    "objectID": "blog/2023-12-23-eds220-thomas-fire/thomas-fire-analysis-blog.html#mapping-fire-perimeter-and-impact-on-land-quality",
    "href": "blog/2023-12-23-eds220-thomas-fire/thomas-fire-analysis-blog.html#mapping-fire-perimeter-and-impact-on-land-quality",
    "title": "Visualization of Thomas Fire Impact on Santa Barbara",
    "section": "",
    "text": "In total, the Thomas Fire burned 281,893 acres over 40 days. When heavy rainfall came down in the early hours of January 9th, 2018, the recently burned, and therefore destabilized, foothills of Santa Barbara crumbled and led to a devastating mudslide in the town of Montecito. The following analysis will visualize the full perimeter of the fire, along with the burn scar it left behind.\n\n\n\n\nThe Landsat raster data contains an extra band and coordinates that are not necessary for this analysis so we will drop them for more efficient processing.\n\n\nCode\n# drop extra dimension \nlandsat = landsat.squeeze().drop('band')\n\n\n\n\n\nThe CA fire perimeter shapefiles require some tidying before we reproject to the same coordinate reference system (CRS) as the Landsat raster data. Reprojection is necessary for accurate plotting. The final step is selecting our fire of interest–the Thomas Fire.\n\n\nCode\n# update ca_fire column names to lowercase\nca_fire.columns = ca_fire.columns.str.lower()\n\n# Reproject shapefile to raster CRS for plotting\nca_fire = ca_fire.to_crs(landsat.rio.crs)\n\n# select thomas fire from ca fire perimeters for easier plotting\nthomas = ca_fire[ca_fire.fire_name == \"THOMAS\"]"
  },
  {
    "objectID": "blog/2023-12-23-eds220-thomas-fire/thomas-fire-analysis-blog.html#map-thomas-fire-perimeter-and-burn-scar",
    "href": "blog/2023-12-23-eds220-thomas-fire/thomas-fire-analysis-blog.html#map-thomas-fire-perimeter-and-burn-scar",
    "title": "Visualization of Thomas Fire Impact on Santa Barbara",
    "section": "",
    "text": "We will map the Thomas Fire perimeter (in red) on top of a false color image of Santa Barbara County. We are using the shortwave infrared, near-infrared, and red bands from the Landsat raster. With this combination of bands, we will be able to clearly see any burned area in red.\n\n\nCode\n# map false color image with thomas fire perimeter\nfig, ax = plt.subplots()\n\n# plot false color image\nlandsat[['swir22','nir08','red']].to_array().plot.imshow(robust = True,\n                                                        ax = ax)\n# plot thomas fire perimeter in red\nthomas.boundary.plot(ax = ax,\n            color = \"red\",\n                    linewidth = 0.8)\n\n# create thomas fire patch for legend\nthomas_patch = mlines.Line2D([],[],\n                             color = \"red\",\n                             linestyle = \"-\",\n                             label = \"Thomas Fire Perimeter\")\n\n# add legend to label thomas fire perimeter\nax.legend(handles = [thomas_patch], \n          frameon = True,\n         loc = 'upper right')\n\n# add map title\nplt.title('Santa Barbara Thomas Fire (2017)')\n\n# turn off axes\nax.axis('off')\n\nplt.show()\n\n\n\n\n\nThe Thomas Fire perimeter almost perfectly encompasses the burn scar it left behind, which is the large area colored red."
  },
  {
    "objectID": "blog/2023-12-23-eds220-thomas-fire/thomas-fire-analysis-blog.html#conclusion",
    "href": "blog/2023-12-23-eds220-thomas-fire/thomas-fire-analysis-blog.html#conclusion",
    "title": "Visualization of Thomas Fire Impact on Santa Barbara",
    "section": "",
    "text": "Let’s take one last look at our analysis results:\n \nThe Thomas Fire had a very large impact on Santa Barbara county both while it was burning, and after it was finally contained. We saw a huge spike in the air quality–at unhealthy and very unhealthy levels during December 2017. Additionally, the fire left a huge burn scar that consequently led to another devastating natural disaster."
  },
  {
    "objectID": "blog/2023-12-15-eds222-chl-nutrients/index.html",
    "href": "blog/2023-12-15-eds222-chl-nutrients/index.html",
    "title": "Relationship between chlorophyll-a and nutrients in the Santa Barbara Channel",
    "section": "",
    "text": "Santa Barbara Coast\n\n\n\n\nPhytoplankton play a key role in both oceanic food webs and the global carbon cycle. Although they only make up 0.2% of the global primary producer biomass, phytoplankton are responsible for nearly half of Earth’s primary production (Field et al 1998). Every marine organism relies on phytoplankton directly or indirectly for fuel and through photosynthesis, phytoplankton convert inorganic carbon, CO2, into organic carbon. It is then essential to study them to understand how they can mitigate and/or be affected by climate change. Since all photosynthetically active phytoplankton use chlorophyll-a pigment to produce their own fuel, chlorophyll-a is commonly used as a proxy for phytoplankton biomass.\nIn order to grow and thrive, phytoplankton rely on certain nutrients–phosphate (PO4) and dissolved inorganic nitrogen (nitrate, nitrite, ammonium). It has been proven that on short timescales, such as weeks and months, the previously mentioned nutrients are dominant drivers of changes in chlorophyll-a concentration, with a directly proportional relationship (Blauw et al 2018).\nCoastal ocean waters are teeming with life and are more productive compared to the open ocean, but are also most vulnerable to climate change (Sigman and Hain 2012). By growing our understanding of the chemistry and biology in these coastal areas, we can better protect and predict future changes due to climate change and ocean acidification.\nWhile learning about the close relationship between chlorophyll-a and nutrients, I began to wonder if, with a large enough dataset, a statistically significant relationship could be characterized. I knew that my hometown, Santa Barbara, had a Long-Term Ecological Research project with years worth of open access coastal chemistry and nutrient data, so I set out to answer this question with their data.\n\n\n\nThe Santa Barbara Coastal Long-Term Ecological Research program has been conducting monthly nearshore cruises along the Santa Barbra channel at 16 sites since 2000. Water samples are collected with a rosette sampler and multiple nutrients and water chemistry parameters are measured. The data are accessible to anyone on the Environmental Data Initiative or DataOne websites. Included in this dataset are measurements of chlorophyll-a, phosphate, nitrate, nitrite, and ammonium concentrations, which I used for my analysis.\n\n\n\nSBC LTER sampling locations\n\n\n\n\n\n\n\nI imported the data via a URL leading to the DataOne website, but it could also be downloaded and stored locally.\nInitial data cleaning was done in the same step as importing by piping. The initial data frame was relatively tidy, but needed certain values to be replaced with NAs: any 99999 values where data was missing and nutrient measurements labeled “BDL” for below detection level.\nSince chlorophyll-a concentration is driven by phosphate and dissolved inorganic nitrogen, a new column was created with the sum of the components of dissolved inorganic nitrogen: nitrite, nitrate and ammonium. For more accurate sum totals, an intermediate data frame was created in order to convert the NA values to 0. Once the sums were calculated, any sums equaling zero were converted back to NAs and the dissolved inorganic nitrogen column was added via cbind() back to the original data frame. Lastly, a new dataframe was created with only the necessary variables for more efficient handling.\n\n\nCode\nbottle &lt;- read_delim(\"https://cn.dataone.org/cn/v2/resolve/https%3A%2F%2Fpasta.lternet.edu%2Fpackage%2Fdata%2Feml%2Fknb-lter-sbc%2F10%2F27%2F572816525903a898f686df5b64eb3852\",\n                     # BDL = below detection limit, so convert those to NA\n                     na = \"BDL\",\n                     show_col_types = FALSE) %&gt;% \n  clean_names() %&gt;% \n  # convert any 99999 value to NA values \n  replace_with_na_all(condition = ~.x == 99999) %&gt;% \n  # two rows at station Q2 which is not in the meta data and a positive longitude...\n  filter(station != \"Q2\")\n# problems(bottle)\n# bottle &lt;- read_delim(here(\"data\", \"LTER_monthly_bottledata_20220930.txt\"), \n                     # BDL = below detection limit, so convert those to NA\n                    # na = \"BDL\") %&gt;% \n\n\n\n\nCode\n# select preferred nitrogen columns\nbottle_nutrients &lt;- bottle %&gt;% \n  select(no2_no3_umol_l, ammonia_umol_l)\n\n# convert any NAs to 0 for more accurate sums\nbottle_nutrients[is.na(bottle_nutrients)] &lt;- 0\n\n# create column DIN as sum of the nitrogen components\nbottle_nutrients &lt;- bottle_nutrients %&gt;% \n  mutate(din_umol_l = no2_no3_umol_l + ammonia_umol_l)\n\n# convert and 0s back to NA\nbottle_nutrients$din_umol_l[bottle_nutrients$din_umol_l == 0] &lt;- NA\n\n# create the data frame we want by adding DIN column and only selecting chl and nutrients\nbottle_complete &lt;- bottle %&gt;% \n  cbind(din_umol_l = bottle_nutrients$din_umol_l) %&gt;% \n  select(chl_a_ug_l, po4_umol_l, din_umol_l)\n\n\n\n\n\nThe plan was to run an ordinary least squares (OLS) multiple linear regression between chlorophyll-a and phosphate and dissolved inorganic nitrogen. Before proceeding, I explored the distribution of each of the variables and found that chlorophyll-a had some large outliers which created a positive skew and long right tail (Figure 1). In order to account for the outliers and lower the leverage of large values in the model, the log of chlorophyll-a concentration was used (Figure 2).\n\n\nCode\nggplot(data = bottle_complete) +\n  geom_histogram(aes(chl_a_ug_l), \n                 fill = \"darkgreen\", \n                 color = \"white\",\n                 bins = 50) +\n  labs(x = \"[Chlorophyll-a] (\\u03BCg/L)\",\n       y = \"Frequency\",\n       title = \"Chl-a Distribution\",\n       caption = \"Fig 1. Distribution of chlorophyll-a concentrations in coastal water samples.\") +\n  theme_bw() +\n  theme(plot.caption = element_text(hjust=0))\n\n\n\n\n\nA new column was added, the log of chlorphyll-a concentration, and was utilized in the following regression model.\n\n\nCode\n# add log(chl-a) column\nbottle_complete &lt;- bottle_complete %&gt;% \n  mutate(log_chla = log(chl_a_ug_l))\n\n# check distributions again\nggplot(data = bottle_complete) +\n  geom_histogram(aes(log_chla), \n                 fill = \"darkgreen\", \n                 color = \"white\") +\n  labs(x = \"log[Chlorophyll-a]\",\n       y = \"Frequency\",\n       title = \"log(chl-a) Distribution\",\n       caption = \"Fig 2. Distribution of the log of chlorophyll-a concentration.\") +\n  theme_bw() +\n  theme(plot.caption = element_text(hjust=0)) \n\n\n\n\n\n\n\n\n\nNow that the log of chlorophyll-a concentration lowers the leverage of large values, multiple linear regression was implemented to answer my question. Nitrogen and phosphorous are co-limiting nutrients and phytoplankton rely on a certain ratio of nutrients for optimal growth – which is known as the Redfield Ratio. Due to this, the response of phytoplankton to each nutrient can actually depend on the supply of the other (Frost et al 2023). Due to this phenomenon, an interaction term between phosphorous and dissolved inorganic nitrogen was included in the regression model.\n\n\nCode\n# multiple linear regression with interaction term\nmodel &lt;- lm(log_chla ~ po4_umol_l + din_umol_l + din_umol_l:po4_umol_l, data = bottle_complete)\n\n# sjplot for clean output table\nsjPlot::tab_model(model, digits = 3, show.se = TRUE, \n                  title = \"Table 1. Summary of log-linear multiple regression model with interaction term.\", string.se = \"SE\") \n\n\n\nTable 1. Summary of log-linear multiple regression model with interaction term.\n\n\n \nlog chla\n\n\nPredictors\nEstimates\nSE\nCI\np\n\n\n(Intercept)\n0.711\n0.044\n0.625 – 0.796\n&lt;0.001\n\n\npo4 umol l\n-0.482\n0.150\n-0.777 – -0.188\n0.001\n\n\ndin umol l\n0.069\n0.013\n0.042 – 0.095\n&lt;0.001\n\n\npo4 umol l × din umol l\n-0.037\n0.008\n-0.054 – -0.020\n&lt;0.001\n\n\nObservations\n2473\n\n\nR2 / R2 adjusted\n0.021 / 0.020\n\n\n\n\n\n\n\n\n\nThis model produces a lot of outputs, so let’s interpret what each coefficient value means:\n\n(Intercept): the exponential of the intercept (2.035) is the predicted concentration of chlorophyll-a in ug/L when the concentrations of both phosphate and dissolved inorganic nitrogen are zero.\npo4 umol l: a one micro mole per liter increase in phosphate changes the concentration of chlorophyll-a by -48.2%, when there is no dissolved inorganic nitrogen in the water.\ndin_umol_l: a one micro mole per liter increase in dissolved inorganic nitrogen changes the concentration of chlorophyll-a by 6.9%, when there is no phosphate in the water.\npo4 umol l x din umol l: Since both parameters in the interaction term are continuous variables, this coefficient describes the marginal effect of both nutrients on each other’s slope of their relationship with log(chlorophyll-a):\n\neffect of phosphate:-0.48 + -0.04*DIN\neffect of nitrogen: 0.07 + -0.04*PO4\n\n\n\n\n\nSince the interaction is between two continuous variables, the slope of one nutrient’s relationship with chlorphyll-a is conditional on the concentration of the other. This is called the marginal effect. We can actually plot the marginal effects of phosphate and nitrogen on each other to better visualize:\n\n\nCode\ndevtools::source_url(\"https://raw.githubusercontent.com/jkarreth/JKmisc/master/ggintfun.R\")\n\nggintfun(obj = model, varnames = c(\"po4_umol_l\", \"din_umol_l\"), \n         varlabs = c(\"Phosphate\", \"Dissolved Inorganic Nitrogen\"),\n         title = FALSE, rug = TRUE,\n         twoways = TRUE)\n\n\n Fig 3. Marginal effects of phosphate (left) and dissolved inorganic nitrogen (right).\n\n\n\n\nAll of the coeefficients of the regression model are significant at a significance level of \\(\\alpha = 0.01\\) (Table 1). Therefore this relationship between chlorophyll-a and phosphate and dissolved inorganic nitrogen can be considered statistically significant. However, when investigating the relationship between the two nutrients, phosphate and dissolved inorganic nitrogen are colinear (Figure 4). Due to this, the coefficients in Table 1 must be considered with confidence because the model could be very sensitive to changes in the nutrient concentrations. Additionally, although the coefficients may appear significant, the adjusted \\(R^2\\), 0.02, indicates that these nutrients explain very little of the total variability in chlorphyll-a.\n\n\nCode\nggplot(data = bottle_complete, aes(x = din_umol_l, y = po4_umol_l)) +\n  geom_point(alpha = 0.5) +\n  labs(x = \"Dissolved Inorganic Nitrogen (\\u03BCmol/L)\",\n       y = \"Phosphate (\\u03BCmol/L)\",\n       caption = \"Fig 4. Relationship between measured dissolved inorganic nitrogen and phosphate demonstrating collinearity\") +\n  geom_smooth(method = lm, se = FALSE,\n              color = \"darkseagreen\") +\n  scale_x_continuous(expand = c(0, 0), limits = c(0, 25)) +\n  scale_y_continuous(expand = c(0,0), limits = c(0, 3)) +\n  theme_bw() +\n  theme(plot.caption = element_text(hjust = 0))\n\n\n\n\n\n\n\n\nAlthough nutrients play a large role in chlorophyll-a concentration, and therefore phytoplankton biomass, there are other drivers with high importance including temperature and available light. Future work should include isolating and controlling for temperature and light availability to better characterize the relationship between chlorophyll-a and nutrients. Once a better model fit is constructed, further work could include investigating the affect of site and depth in the channel have on this relationship.\n\n\n\nBlauw, A. N., E. Benincà, R. W.P.M. Laane, N. Greenwood and J. Huisman. 2018. Predictability and environmental drivers of chlorophyll fluctuations vary across different time scales and regions of the North Sea. Progress in Oceanography 161: 1-18. ISSN 0079-6611. doi:10.1016/j.pocean.2018.01.005.\nField, C. B., M. J., Behrenfeld, J. T., Randerson, and P. Falkowski.1998. Primary production of the biosphere: Integrating terrestrial and oceanic components. Science 281: 237-240. doi:10.1126/science.281.5374.237\nFrost, P.C., Pearce, N.J.T., Berger, S.A., Gessner, M.O., Makower, A.K., Marzetz, V., Nejstgaard, J.C., Pralle, A., Schälicke, S., Wacker, A., Wagner, N.D. and Xenopoulos, M.A. (2023), Interactive effects of nitrogen and phosphorus on growth and stoichiometry of lake phytoplankton. Limnol Oceanogr, 68: 1172-1184. https://doi.org/10.1002/lno.12337\nSigman, D. M. & Hain, M. P. (2012) The Biological Productivity of the Ocean. Nature Education Knowledge 3(10):21. https://www.nature.com/scitable/knowledge/library/the-biological-productivity-of-the-ocean-70631104/ Accessed December 15, 2023"
  },
  {
    "objectID": "blog/2023-12-15-eds222-chl-nutrients/index.html#background",
    "href": "blog/2023-12-15-eds222-chl-nutrients/index.html#background",
    "title": "Relationship between chlorophyll-a and nutrients in the Santa Barbara Channel",
    "section": "",
    "text": "Phytoplankton play a key role in both oceanic food webs and the global carbon cycle. Although they only make up 0.2% of the global primary producer biomass, phytoplankton are responsible for nearly half of Earth’s primary production (Field et al 1998). Every marine organism relies on phytoplankton directly or indirectly for fuel and through photosynthesis, phytoplankton convert inorganic carbon, CO2, into organic carbon. It is then essential to study them to understand how they can mitigate and/or be affected by climate change. Since all photosynthetically active phytoplankton use chlorophyll-a pigment to produce their own fuel, chlorophyll-a is commonly used as a proxy for phytoplankton biomass.\nIn order to grow and thrive, phytoplankton rely on certain nutrients–phosphate (PO4) and dissolved inorganic nitrogen (nitrate, nitrite, ammonium). It has been proven that on short timescales, such as weeks and months, the previously mentioned nutrients are dominant drivers of changes in chlorophyll-a concentration, with a directly proportional relationship (Blauw et al 2018).\nCoastal ocean waters are teeming with life and are more productive compared to the open ocean, but are also most vulnerable to climate change (Sigman and Hain 2012). By growing our understanding of the chemistry and biology in these coastal areas, we can better protect and predict future changes due to climate change and ocean acidification.\nWhile learning about the close relationship between chlorophyll-a and nutrients, I began to wonder if, with a large enough dataset, a statistically significant relationship could be characterized. I knew that my hometown, Santa Barbara, had a Long-Term Ecological Research project with years worth of open access coastal chemistry and nutrient data, so I set out to answer this question with their data."
  },
  {
    "objectID": "blog/2023-12-15-eds222-chl-nutrients/index.html#data",
    "href": "blog/2023-12-15-eds222-chl-nutrients/index.html#data",
    "title": "Relationship between chlorophyll-a and nutrients in the Santa Barbara Channel",
    "section": "",
    "text": "The Santa Barbara Coastal Long-Term Ecological Research program has been conducting monthly nearshore cruises along the Santa Barbra channel at 16 sites since 2000. Water samples are collected with a rosette sampler and multiple nutrients and water chemistry parameters are measured. The data are accessible to anyone on the Environmental Data Initiative or DataOne websites. Included in this dataset are measurements of chlorophyll-a, phosphate, nitrate, nitrite, and ammonium concentrations, which I used for my analysis.\n\n\n\nSBC LTER sampling locations"
  },
  {
    "objectID": "blog/2023-12-15-eds222-chl-nutrients/index.html#methods",
    "href": "blog/2023-12-15-eds222-chl-nutrients/index.html#methods",
    "title": "Relationship between chlorophyll-a and nutrients in the Santa Barbara Channel",
    "section": "",
    "text": "I imported the data via a URL leading to the DataOne website, but it could also be downloaded and stored locally.\nInitial data cleaning was done in the same step as importing by piping. The initial data frame was relatively tidy, but needed certain values to be replaced with NAs: any 99999 values where data was missing and nutrient measurements labeled “BDL” for below detection level.\nSince chlorophyll-a concentration is driven by phosphate and dissolved inorganic nitrogen, a new column was created with the sum of the components of dissolved inorganic nitrogen: nitrite, nitrate and ammonium. For more accurate sum totals, an intermediate data frame was created in order to convert the NA values to 0. Once the sums were calculated, any sums equaling zero were converted back to NAs and the dissolved inorganic nitrogen column was added via cbind() back to the original data frame. Lastly, a new dataframe was created with only the necessary variables for more efficient handling.\n\n\nCode\nbottle &lt;- read_delim(\"https://cn.dataone.org/cn/v2/resolve/https%3A%2F%2Fpasta.lternet.edu%2Fpackage%2Fdata%2Feml%2Fknb-lter-sbc%2F10%2F27%2F572816525903a898f686df5b64eb3852\",\n                     # BDL = below detection limit, so convert those to NA\n                     na = \"BDL\",\n                     show_col_types = FALSE) %&gt;% \n  clean_names() %&gt;% \n  # convert any 99999 value to NA values \n  replace_with_na_all(condition = ~.x == 99999) %&gt;% \n  # two rows at station Q2 which is not in the meta data and a positive longitude...\n  filter(station != \"Q2\")\n# problems(bottle)\n# bottle &lt;- read_delim(here(\"data\", \"LTER_monthly_bottledata_20220930.txt\"), \n                     # BDL = below detection limit, so convert those to NA\n                    # na = \"BDL\") %&gt;% \n\n\n\n\nCode\n# select preferred nitrogen columns\nbottle_nutrients &lt;- bottle %&gt;% \n  select(no2_no3_umol_l, ammonia_umol_l)\n\n# convert any NAs to 0 for more accurate sums\nbottle_nutrients[is.na(bottle_nutrients)] &lt;- 0\n\n# create column DIN as sum of the nitrogen components\nbottle_nutrients &lt;- bottle_nutrients %&gt;% \n  mutate(din_umol_l = no2_no3_umol_l + ammonia_umol_l)\n\n# convert and 0s back to NA\nbottle_nutrients$din_umol_l[bottle_nutrients$din_umol_l == 0] &lt;- NA\n\n# create the data frame we want by adding DIN column and only selecting chl and nutrients\nbottle_complete &lt;- bottle %&gt;% \n  cbind(din_umol_l = bottle_nutrients$din_umol_l) %&gt;% \n  select(chl_a_ug_l, po4_umol_l, din_umol_l)\n\n\n\n\n\nThe plan was to run an ordinary least squares (OLS) multiple linear regression between chlorophyll-a and phosphate and dissolved inorganic nitrogen. Before proceeding, I explored the distribution of each of the variables and found that chlorophyll-a had some large outliers which created a positive skew and long right tail (Figure 1). In order to account for the outliers and lower the leverage of large values in the model, the log of chlorophyll-a concentration was used (Figure 2).\n\n\nCode\nggplot(data = bottle_complete) +\n  geom_histogram(aes(chl_a_ug_l), \n                 fill = \"darkgreen\", \n                 color = \"white\",\n                 bins = 50) +\n  labs(x = \"[Chlorophyll-a] (\\u03BCg/L)\",\n       y = \"Frequency\",\n       title = \"Chl-a Distribution\",\n       caption = \"Fig 1. Distribution of chlorophyll-a concentrations in coastal water samples.\") +\n  theme_bw() +\n  theme(plot.caption = element_text(hjust=0))\n\n\n\n\n\nA new column was added, the log of chlorphyll-a concentration, and was utilized in the following regression model.\n\n\nCode\n# add log(chl-a) column\nbottle_complete &lt;- bottle_complete %&gt;% \n  mutate(log_chla = log(chl_a_ug_l))\n\n# check distributions again\nggplot(data = bottle_complete) +\n  geom_histogram(aes(log_chla), \n                 fill = \"darkgreen\", \n                 color = \"white\") +\n  labs(x = \"log[Chlorophyll-a]\",\n       y = \"Frequency\",\n       title = \"log(chl-a) Distribution\",\n       caption = \"Fig 2. Distribution of the log of chlorophyll-a concentration.\") +\n  theme_bw() +\n  theme(plot.caption = element_text(hjust=0))"
  },
  {
    "objectID": "blog/2023-12-15-eds222-chl-nutrients/index.html#regression",
    "href": "blog/2023-12-15-eds222-chl-nutrients/index.html#regression",
    "title": "Relationship between chlorophyll-a and nutrients in the Santa Barbara Channel",
    "section": "",
    "text": "Now that the log of chlorophyll-a concentration lowers the leverage of large values, multiple linear regression was implemented to answer my question. Nitrogen and phosphorous are co-limiting nutrients and phytoplankton rely on a certain ratio of nutrients for optimal growth – which is known as the Redfield Ratio. Due to this, the response of phytoplankton to each nutrient can actually depend on the supply of the other (Frost et al 2023). Due to this phenomenon, an interaction term between phosphorous and dissolved inorganic nitrogen was included in the regression model.\n\n\nCode\n# multiple linear regression with interaction term\nmodel &lt;- lm(log_chla ~ po4_umol_l + din_umol_l + din_umol_l:po4_umol_l, data = bottle_complete)\n\n# sjplot for clean output table\nsjPlot::tab_model(model, digits = 3, show.se = TRUE, \n                  title = \"Table 1. Summary of log-linear multiple regression model with interaction term.\", string.se = \"SE\") \n\n\n\nTable 1. Summary of log-linear multiple regression model with interaction term.\n\n\n \nlog chla\n\n\nPredictors\nEstimates\nSE\nCI\np\n\n\n(Intercept)\n0.711\n0.044\n0.625 – 0.796\n&lt;0.001\n\n\npo4 umol l\n-0.482\n0.150\n-0.777 – -0.188\n0.001\n\n\ndin umol l\n0.069\n0.013\n0.042 – 0.095\n&lt;0.001\n\n\npo4 umol l × din umol l\n-0.037\n0.008\n-0.054 – -0.020\n&lt;0.001\n\n\nObservations\n2473\n\n\nR2 / R2 adjusted\n0.021 / 0.020\n\n\n\n\n\n\n\n\n\nThis model produces a lot of outputs, so let’s interpret what each coefficient value means:\n\n(Intercept): the exponential of the intercept (2.035) is the predicted concentration of chlorophyll-a in ug/L when the concentrations of both phosphate and dissolved inorganic nitrogen are zero.\npo4 umol l: a one micro mole per liter increase in phosphate changes the concentration of chlorophyll-a by -48.2%, when there is no dissolved inorganic nitrogen in the water.\ndin_umol_l: a one micro mole per liter increase in dissolved inorganic nitrogen changes the concentration of chlorophyll-a by 6.9%, when there is no phosphate in the water.\npo4 umol l x din umol l: Since both parameters in the interaction term are continuous variables, this coefficient describes the marginal effect of both nutrients on each other’s slope of their relationship with log(chlorophyll-a):\n\neffect of phosphate:-0.48 + -0.04*DIN\neffect of nitrogen: 0.07 + -0.04*PO4\n\n\n\n\n\nSince the interaction is between two continuous variables, the slope of one nutrient’s relationship with chlorphyll-a is conditional on the concentration of the other. This is called the marginal effect. We can actually plot the marginal effects of phosphate and nitrogen on each other to better visualize:\n\n\nCode\ndevtools::source_url(\"https://raw.githubusercontent.com/jkarreth/JKmisc/master/ggintfun.R\")\n\nggintfun(obj = model, varnames = c(\"po4_umol_l\", \"din_umol_l\"), \n         varlabs = c(\"Phosphate\", \"Dissolved Inorganic Nitrogen\"),\n         title = FALSE, rug = TRUE,\n         twoways = TRUE)\n\n\n Fig 3. Marginal effects of phosphate (left) and dissolved inorganic nitrogen (right)."
  },
  {
    "objectID": "blog/2023-12-15-eds222-chl-nutrients/index.html#discussion",
    "href": "blog/2023-12-15-eds222-chl-nutrients/index.html#discussion",
    "title": "Relationship between chlorophyll-a and nutrients in the Santa Barbara Channel",
    "section": "",
    "text": "All of the coeefficients of the regression model are significant at a significance level of \\(\\alpha = 0.01\\) (Table 1). Therefore this relationship between chlorophyll-a and phosphate and dissolved inorganic nitrogen can be considered statistically significant. However, when investigating the relationship between the two nutrients, phosphate and dissolved inorganic nitrogen are colinear (Figure 4). Due to this, the coefficients in Table 1 must be considered with confidence because the model could be very sensitive to changes in the nutrient concentrations. Additionally, although the coefficients may appear significant, the adjusted \\(R^2\\), 0.02, indicates that these nutrients explain very little of the total variability in chlorphyll-a.\n\n\nCode\nggplot(data = bottle_complete, aes(x = din_umol_l, y = po4_umol_l)) +\n  geom_point(alpha = 0.5) +\n  labs(x = \"Dissolved Inorganic Nitrogen (\\u03BCmol/L)\",\n       y = \"Phosphate (\\u03BCmol/L)\",\n       caption = \"Fig 4. Relationship between measured dissolved inorganic nitrogen and phosphate demonstrating collinearity\") +\n  geom_smooth(method = lm, se = FALSE,\n              color = \"darkseagreen\") +\n  scale_x_continuous(expand = c(0, 0), limits = c(0, 25)) +\n  scale_y_continuous(expand = c(0,0), limits = c(0, 3)) +\n  theme_bw() +\n  theme(plot.caption = element_text(hjust = 0))"
  },
  {
    "objectID": "blog/2023-12-15-eds222-chl-nutrients/index.html#conclusion",
    "href": "blog/2023-12-15-eds222-chl-nutrients/index.html#conclusion",
    "title": "Relationship between chlorophyll-a and nutrients in the Santa Barbara Channel",
    "section": "",
    "text": "Although nutrients play a large role in chlorophyll-a concentration, and therefore phytoplankton biomass, there are other drivers with high importance including temperature and available light. Future work should include isolating and controlling for temperature and light availability to better characterize the relationship between chlorophyll-a and nutrients. Once a better model fit is constructed, further work could include investigating the affect of site and depth in the channel have on this relationship."
  },
  {
    "objectID": "blog/2023-12-15-eds222-chl-nutrients/index.html#references",
    "href": "blog/2023-12-15-eds222-chl-nutrients/index.html#references",
    "title": "Relationship between chlorophyll-a and nutrients in the Santa Barbara Channel",
    "section": "",
    "text": "Blauw, A. N., E. Benincà, R. W.P.M. Laane, N. Greenwood and J. Huisman. 2018. Predictability and environmental drivers of chlorophyll fluctuations vary across different time scales and regions of the North Sea. Progress in Oceanography 161: 1-18. ISSN 0079-6611. doi:10.1016/j.pocean.2018.01.005.\nField, C. B., M. J., Behrenfeld, J. T., Randerson, and P. Falkowski.1998. Primary production of the biosphere: Integrating terrestrial and oceanic components. Science 281: 237-240. doi:10.1126/science.281.5374.237\nFrost, P.C., Pearce, N.J.T., Berger, S.A., Gessner, M.O., Makower, A.K., Marzetz, V., Nejstgaard, J.C., Pralle, A., Schälicke, S., Wacker, A., Wagner, N.D. and Xenopoulos, M.A. (2023), Interactive effects of nitrogen and phosphorus on growth and stoichiometry of lake phytoplankton. Limnol Oceanogr, 68: 1172-1184. https://doi.org/10.1002/lno.12337\nSigman, D. M. & Hain, M. P. (2012) The Biological Productivity of the Ocean. Nature Education Knowledge 3(10):21. https://www.nature.com/scitable/knowledge/library/the-biological-productivity-of-the-ocean-70631104/ Accessed December 15, 2023"
  },
  {
    "objectID": "blog/2023-12-15-eds223-la-redlining-biodiversity-obs/index.html",
    "href": "blog/2023-12-15-eds223-la-redlining-biodiversity-obs/index.html",
    "title": "Historic redlining and biodiveristy observations in Los Angeles County",
    "section": "",
    "text": "1939 redlining map of LA from PBS SoCal\n\n\n\n\nThe United States has a long history of systemic racism that continues to permeate society in both obvious and hidden ways. One of the many consequences of this is the fact that poor or marginalized communities are exposed to and harmed by air pollution, hazardous waste, resource extraction, and more at a disproportionate amount. The environmental justice movement was born from this and has been fighting for community protection, enforcement of environmental regulations and policies, and exposing this reality.\nOne historical reason for the present day conditions can be traced back to the 1930s. As part of the New Deal, the Home Owner’s Loan Corporation (HOLC) rated neighborhoods based on their perceived safety for real estate investment. Their ranking system, (A (green), B (blue), C (yellow), D (red)) was then used to block access to loans for home ownership. As you might guess, racism played a leading role in the designation of grades and led to the phenomenon colloquially known as “redlining.” This practice has had widely-documented consequences on community wealth, environment, and health. 1 Redlined neighborhoods have less greenery2 and are hotter than other neighborhoods.3 Lee and co-authors, in a meta-analysis, found that “gunshot-related injuries, asthma, heat-related outcomes, and multiple chronic conditions were worse in redlined areas.”4\nCheck out coverage by the New York Times.\nA recent study found that redlining has not only affected the environments and health hazards communities are exposed to, it has also shaped our observations of biodiversity.5 Community or citizen science, whereby individuals share observations of species on their own time, is generating an enormous volume of data. In recent years, apps such as iNaturalist have enabled more people to identify and report various species of plants and animals. This increase, however, has also highlighted areas of missingness–where individuals do not, or cannot, participate in citizen science for various reasons. Ellis-Soto and co-authors found that redlined neighborhoods remain the most undersampled areas across 195 US cities. This gap is highly concerning, because conservation decisions and policies are made based on these data. If impactful decisions are being made on inaccurate data, this could lead to actions that continue to harm poor and marginalized communities.\nCheck out coverage by EOS.\n\n\n\nWhat lasting impacts does redlining have on the county of Los Angeles? Now that we know that bird biodiversity data tend to be undersampled in redlined neighborhoods, is this true in LA?\nLet’s answer these questions by:\n\nUsing EJScreen data to map current environmental and demographic indicators in LA\nComparing current conditions across census block groups in LA that were historically redlined\nComparing percent of reported bird observations across areas in LA that were historically redlined\n\n\n\n\nThree datasets will be used to answer our questions: US EPA EJScreen data, digitized HOLC maps, and bird biodiveristy observations in LA.\n\n\nThe United States Environmental Protection Agency’s Environmental Justice Screening and Mapping Tool is an effort to provide national data for advancing their goals and supporting others interested in environmental justice.\nAccording to the US EPA website:\n\nThis screening tool and data may be of interest to community residents or other stakeholders as they search for environmental or demographic information. It can also support a wide range of research and policy goals. The public has used EJScreen in many different locations and in many different ways.\nEPA is sharing EJScreen with the public:\n- to be more transparent about how we consider environmental justice in our work,\n- to assist our stakeholders in making informed decisions about pursuing environmental justice and,\n- to create a common starting point between the agency and the public when looking at issues related to environmental justice.\n\nEJScreen provides environmental and demographic information for the US at the Census tract and block group levels. Block group data has been downloaded, and stored locally, from the EPA site.\n\n\n\nA team of researchers, led by the Digital Scholarship Lab at the University of Richmond have digitized maps and information from the HOLC as part of the Mapping Inequality project.\nThis analysis uses maps of HOLC grade designations for Los Angeles via URL. Information on the data can be found here.6\n\n\n\nThe Global Biodiversity Information Facility is the largest aggregator of biodiversity observations in the world. Observations typically include a location and date that a species was observed. This analysis will use bird observations in 2022.\n\n\n\n\n\n\nThe wastewater discharge indicator in EJScreen assigns a score to each census block group based on the pollution and toxicity of nearby streams and rivers. LA has limited access to local clean water and often deals with extremely polluted water, especially after a storm. Let’s visualize the wastewater discharge indicator for LA census block groups and add points for block groups that are above the 95th percentile of national values for wastewater discharge. Feel free to zoom in on the map to gain a better understanding of where the highest wastewater discharge levels are in the county.\n\n\nCode\n# map of LA\n# color census block groups by wastewater discharge\n# add centroid for block groups above 95th percentile\n\n# filter la dataset for block groups above 95th percentile for wastewater dischare\ntop_percentile &lt;- la_county %&gt;% \n  filter(P_PWDIS &gt; 95)\n\n# make centroids for block groups above 95th percentile\ntop_percentile_centroids &lt;- st_centroid(top_percentile)\n\n# map LA county and color census blocks by waste water discharge\nm1 &lt;- ggplot() +\n  geom_sf(data = la_county, aes(fill = PWDIS),\n          lwd = 0.1,\n          color = 'gray') +\n  scale_fill_viridis_c(direction = -1) +\n  # add above 95th percentile centroids\n  geom_sf(data = top_percentile_centroids,\n          color = 'magenta') +\n  labs(x = \"Longtitude\",\n       y = \"Latitude\",\n       fill = \"Wastewater discharge\") +\n  # choose x axis breaks so longitude is readable\n  scale_x_continuous(breaks = c(-119, -118.6, -118.2, -117.8)) +\n  theme_bw()\n\n# make interactive to better see where the centroids are\nggplotly(m1)\n\n\n\n\n\n\n\n\n\nNow let’s use EJScreen data to investigate demographic (% low income) and environmental (PM 2.5 and Superfund proximity) indicators.\n\n\nCode\nhigh_inc &lt;- la_county %&gt;% \n  # filter to block groups where % of low income is less than 0.05\n  filter(LOWINCPCT &lt; 0.05) %&gt;% \n  # take the resulting number of rows and divide by the total number of block groups\n  # multiply by 100 to get percent value\n  nrow()/nrow(la_county) * 100\n\nprint(paste(round(high_inc,2), \"% of LA census block groups have less than 5% of the population considered low income\"))\n\n\n[1] \"6.11 % of LA census block groups have less than 5% of the population considered low income\"\n\n\nThat means that the majority of LA census block groups have over 5% of the population considered as low income.\n\n\nCode\n# percent of census block groups that are above 80th percentile for both PM 2.5 and Superfund proximity\npm_sf &lt;- la_county %&gt;% \n  filter(P_PM25 &gt; 80 & P_PNPL &gt; 80) %&gt;% \n  nrow() / nrow(la_county) * 100\n\nprint(paste(round(pm_sf,2), \"% of LA census block groups are above the 80th percentile for both PM 2.5 and Superfund proximity\"))\n\n\n[1] \"17.36 % of LA census block groups are above the 80th percentile for both PM 2.5 and Superfund proximity\"\n\n\nOver 1/6 of LA census block groups are excessively exposed to unhealthy air quality and hazardous waste.\n\n\nHow do these stats compare in areas that were historically redlined?\nLet’s take a look at these areas and their grades first:\n\n\nCode\n# plot redlining areas, color by HOLC Grade\nm2 &lt;- ggplot() +\n  geom_sf(data = LA_redlining, aes(fill = grade)) +\n  scale_fill_discrete(type = c(\"green\", \"blue\", \"yellow\", \"red\", \"grey\")) +\n  labs(x = \"Longtitude\",\n       y = \"Latitude\",\n       fill = \"HOLC Grade\") +\n  theme_bw()\n\nm2\n\n\n\n\n\nInterestingly, the C and D grades make up the majority of the center of the county, while most of the A and B grades are at the northern part of the county. Let’s investigate the current conditions in these areas. First up, figure out how many current census block groups fall within the designated areas above.\n\n\nCode\n# transfrom LA_redlining to same crs as la_county\nLA_redlining3857 &lt;- st_transform(LA_redlining, st_crs(la_county))\n\n# block groups that have intersecting geometries as LA_redlining HOLC grades\n# left = FALSE for an inner join\nblock_groups_holc_join &lt;- st_join(x = la_county, y = LA_redlining3857, left = FALSE)\nholc_block_grps &lt;- nrow(block_groups_holc_join)\n\nprint(paste(holc_block_grps, \"census block groups in LA fall within areas with HOLC grades\"))\n\n\n[1] \"6388 census block groups in LA fall within areas with HOLC grades\"\n\n\nLA county has a total of 6591 block groups, so this means that the majority of block groups fall within areas that were historically graded by the HOLC. When we compare current conditions (environmental and demographic) in LA block groups by the grade they were historically assigned, we get this result:\n\n\nCode\n# summary table of means grouped by grade\nt1 &lt;- block_groups_holc_join %&gt;%\n  st_drop_geometry() %&gt;% \n  group_by(grade) %&gt;% \n  summarise(low_inc_pct_avg = mean(LOWINCPCT, na.rm = TRUE),\n            p_pm25_avg = mean(P_PM25, na.rm = TRUE),\n            p_low_life_exp_avg = mean(P_LIFEEXPPCT, na.rm = TRUE),\n            p_cancer_avg = mean(P_CANCER, na.rm = TRUE)) %&gt;% \n  gt() %&gt;% \n  tab_header(title = \"Current EJ Conditions in LA by HOLC grade\")\n\nt1\n\n\n\n\n\n\n  \n    \n      Current EJ Conditions in LA by HOLC grade\n    \n    \n    \n      grade\n      low_inc_pct_avg\n      p_pm25_avg\n      p_low_life_exp_avg\n      p_cancer_avg\n    \n  \n  \n    A\n0.1497511\n72.16036\n23.75982\n44.00670\n    B\n0.2420120\n76.33898\n37.42025\n47.68659\n    C\n0.3408981\n78.81884\n47.88017\n54.55468\n    D\n0.3919059\n80.23700\n53.03621\n56.57589\n    NA\n0.3581823\n76.72973\n50.12409\n41.49324\n  \n  \n  \n\n\n\n\nBased on the averages calculated, the HOLC grade for a census block group in LA appears to be indicative of the percent of the population that is low income, as well as the percentiles they fall within for environmental justice indicators. Groups with a grade of “A” had the lowest average percent of low income (15%), and had an average of the lowest percentiles, comparatively, for PM 2.5, low life expectancy, and air toxics cancer risk. In comparison, areas with a grade of “D” had the highest average percent of low income (39%) and had the highest average percentiles for PM 2.5, low life expectancy, and air toxics cancer risk.\n\n\n\n\nLet’s add bird observations in LA from the year 2022 to our analysis. We want to know if the redlined neighborhoods in LA are undersampled in terms of bird observations. Calculating the percent of total observations in each HOLC grade should get us to an answer.\n\n\nCode\n# plot % of bird observations by HOLC\nggplot(data = holc_birds_pct) +\n  geom_col(aes(x = grade, y = bird_pct_obs, fill = grade),\n           show.legend = FALSE) +\n  scale_fill_discrete(type = c(\"green\", \"blue\", \"yellow\", \"red\", \"grey\")) +\n  labs(x = \"HOLC Grade\",\n       y = \"% Bird Observations\",\n       title = \"Bird Observations in Redlining Categories\") +\n  theme_bw()\n\n\n\n\n\nBased on the findings of Ellis-Soto and co-authors, we would expect to see high percentages in A and B areas and low percentages in C and D areas. Surprisingly, the largest share of bird observations are in areas that were historically graded a C, the second largest share in areas historically graded a D, or historically redlined areas of Los Angeles. This could potentially be a result of LA’s population skyrocketing since 1933 and consequently leading to gentrification of redlined neighborhoods.\n\n\n\n\nRedlining has lasting impacts on environmental and demographic indicators in LA county census block groups. When comparing across grades (A to D), we saw percent of low income increase as well as the percentiles for low life expectancy and exposure to PM 2.5 and air toxics with cancer risk. Therefore, in line with the research, health and quality of life decrease in historically redlined areas. However, we surprisingly found that these areas accounted for a high proportion of bird biodiversity observations, in contrast with the findings of Ellis-Soto and co-authors. This may be for a multitude of reasons that are not yet apparent. The gentrification of redlined neighborhoods is definitely a possibility."
  },
  {
    "objectID": "blog/2023-12-15-eds223-la-redlining-biodiversity-obs/index.html#background",
    "href": "blog/2023-12-15-eds223-la-redlining-biodiversity-obs/index.html#background",
    "title": "Historic redlining and biodiveristy observations in Los Angeles County",
    "section": "",
    "text": "The United States has a long history of systemic racism that continues to permeate society in both obvious and hidden ways. One of the many consequences of this is the fact that poor or marginalized communities are exposed to and harmed by air pollution, hazardous waste, resource extraction, and more at a disproportionate amount. The environmental justice movement was born from this and has been fighting for community protection, enforcement of environmental regulations and policies, and exposing this reality.\nOne historical reason for the present day conditions can be traced back to the 1930s. As part of the New Deal, the Home Owner’s Loan Corporation (HOLC) rated neighborhoods based on their perceived safety for real estate investment. Their ranking system, (A (green), B (blue), C (yellow), D (red)) was then used to block access to loans for home ownership. As you might guess, racism played a leading role in the designation of grades and led to the phenomenon colloquially known as “redlining.” This practice has had widely-documented consequences on community wealth, environment, and health. 1 Redlined neighborhoods have less greenery2 and are hotter than other neighborhoods.3 Lee and co-authors, in a meta-analysis, found that “gunshot-related injuries, asthma, heat-related outcomes, and multiple chronic conditions were worse in redlined areas.”4\nCheck out coverage by the New York Times.\nA recent study found that redlining has not only affected the environments and health hazards communities are exposed to, it has also shaped our observations of biodiversity.5 Community or citizen science, whereby individuals share observations of species on their own time, is generating an enormous volume of data. In recent years, apps such as iNaturalist have enabled more people to identify and report various species of plants and animals. This increase, however, has also highlighted areas of missingness–where individuals do not, or cannot, participate in citizen science for various reasons. Ellis-Soto and co-authors found that redlined neighborhoods remain the most undersampled areas across 195 US cities. This gap is highly concerning, because conservation decisions and policies are made based on these data. If impactful decisions are being made on inaccurate data, this could lead to actions that continue to harm poor and marginalized communities.\nCheck out coverage by EOS."
  },
  {
    "objectID": "blog/2023-12-15-eds223-la-redlining-biodiversity-obs/index.html#analysis",
    "href": "blog/2023-12-15-eds223-la-redlining-biodiversity-obs/index.html#analysis",
    "title": "Historic redlining and biodiveristy observations in Los Angeles County",
    "section": "",
    "text": "What lasting impacts does redlining have on the county of Los Angeles? Now that we know that bird biodiversity data tend to be undersampled in redlined neighborhoods, is this true in LA?\nLet’s answer these questions by:\n\nUsing EJScreen data to map current environmental and demographic indicators in LA\nComparing current conditions across census block groups in LA that were historically redlined\nComparing percent of reported bird observations across areas in LA that were historically redlined"
  },
  {
    "objectID": "blog/2023-12-15-eds223-la-redlining-biodiversity-obs/index.html#data-descriptions",
    "href": "blog/2023-12-15-eds223-la-redlining-biodiversity-obs/index.html#data-descriptions",
    "title": "Historic redlining and biodiveristy observations in Los Angeles County",
    "section": "",
    "text": "Three datasets will be used to answer our questions: US EPA EJScreen data, digitized HOLC maps, and bird biodiveristy observations in LA.\n\n\nThe United States Environmental Protection Agency’s Environmental Justice Screening and Mapping Tool is an effort to provide national data for advancing their goals and supporting others interested in environmental justice.\nAccording to the US EPA website:\n\nThis screening tool and data may be of interest to community residents or other stakeholders as they search for environmental or demographic information. It can also support a wide range of research and policy goals. The public has used EJScreen in many different locations and in many different ways.\nEPA is sharing EJScreen with the public:\n- to be more transparent about how we consider environmental justice in our work,\n- to assist our stakeholders in making informed decisions about pursuing environmental justice and,\n- to create a common starting point between the agency and the public when looking at issues related to environmental justice.\n\nEJScreen provides environmental and demographic information for the US at the Census tract and block group levels. Block group data has been downloaded, and stored locally, from the EPA site.\n\n\n\nA team of researchers, led by the Digital Scholarship Lab at the University of Richmond have digitized maps and information from the HOLC as part of the Mapping Inequality project.\nThis analysis uses maps of HOLC grade designations for Los Angeles via URL. Information on the data can be found here.6\n\n\n\nThe Global Biodiversity Information Facility is the largest aggregator of biodiversity observations in the world. Observations typically include a location and date that a species was observed. This analysis will use bird observations in 2022."
  },
  {
    "objectID": "blog/2023-12-15-eds223-la-redlining-biodiversity-obs/index.html#legacy-of-redlining-in-present-day-la",
    "href": "blog/2023-12-15-eds223-la-redlining-biodiversity-obs/index.html#legacy-of-redlining-in-present-day-la",
    "title": "Historic redlining and biodiveristy observations in Los Angeles County",
    "section": "",
    "text": "The wastewater discharge indicator in EJScreen assigns a score to each census block group based on the pollution and toxicity of nearby streams and rivers. LA has limited access to local clean water and often deals with extremely polluted water, especially after a storm. Let’s visualize the wastewater discharge indicator for LA census block groups and add points for block groups that are above the 95th percentile of national values for wastewater discharge. Feel free to zoom in on the map to gain a better understanding of where the highest wastewater discharge levels are in the county.\n\n\nCode\n# map of LA\n# color census block groups by wastewater discharge\n# add centroid for block groups above 95th percentile\n\n# filter la dataset for block groups above 95th percentile for wastewater dischare\ntop_percentile &lt;- la_county %&gt;% \n  filter(P_PWDIS &gt; 95)\n\n# make centroids for block groups above 95th percentile\ntop_percentile_centroids &lt;- st_centroid(top_percentile)\n\n# map LA county and color census blocks by waste water discharge\nm1 &lt;- ggplot() +\n  geom_sf(data = la_county, aes(fill = PWDIS),\n          lwd = 0.1,\n          color = 'gray') +\n  scale_fill_viridis_c(direction = -1) +\n  # add above 95th percentile centroids\n  geom_sf(data = top_percentile_centroids,\n          color = 'magenta') +\n  labs(x = \"Longtitude\",\n       y = \"Latitude\",\n       fill = \"Wastewater discharge\") +\n  # choose x axis breaks so longitude is readable\n  scale_x_continuous(breaks = c(-119, -118.6, -118.2, -117.8)) +\n  theme_bw()\n\n# make interactive to better see where the centroids are\nggplotly(m1)\n\n\n\n\n\n\n\n\n\nNow let’s use EJScreen data to investigate demographic (% low income) and environmental (PM 2.5 and Superfund proximity) indicators.\n\n\nCode\nhigh_inc &lt;- la_county %&gt;% \n  # filter to block groups where % of low income is less than 0.05\n  filter(LOWINCPCT &lt; 0.05) %&gt;% \n  # take the resulting number of rows and divide by the total number of block groups\n  # multiply by 100 to get percent value\n  nrow()/nrow(la_county) * 100\n\nprint(paste(round(high_inc,2), \"% of LA census block groups have less than 5% of the population considered low income\"))\n\n\n[1] \"6.11 % of LA census block groups have less than 5% of the population considered low income\"\n\n\nThat means that the majority of LA census block groups have over 5% of the population considered as low income.\n\n\nCode\n# percent of census block groups that are above 80th percentile for both PM 2.5 and Superfund proximity\npm_sf &lt;- la_county %&gt;% \n  filter(P_PM25 &gt; 80 & P_PNPL &gt; 80) %&gt;% \n  nrow() / nrow(la_county) * 100\n\nprint(paste(round(pm_sf,2), \"% of LA census block groups are above the 80th percentile for both PM 2.5 and Superfund proximity\"))\n\n\n[1] \"17.36 % of LA census block groups are above the 80th percentile for both PM 2.5 and Superfund proximity\"\n\n\nOver 1/6 of LA census block groups are excessively exposed to unhealthy air quality and hazardous waste.\n\n\nHow do these stats compare in areas that were historically redlined?\nLet’s take a look at these areas and their grades first:\n\n\nCode\n# plot redlining areas, color by HOLC Grade\nm2 &lt;- ggplot() +\n  geom_sf(data = LA_redlining, aes(fill = grade)) +\n  scale_fill_discrete(type = c(\"green\", \"blue\", \"yellow\", \"red\", \"grey\")) +\n  labs(x = \"Longtitude\",\n       y = \"Latitude\",\n       fill = \"HOLC Grade\") +\n  theme_bw()\n\nm2\n\n\n\n\n\nInterestingly, the C and D grades make up the majority of the center of the county, while most of the A and B grades are at the northern part of the county. Let’s investigate the current conditions in these areas. First up, figure out how many current census block groups fall within the designated areas above.\n\n\nCode\n# transfrom LA_redlining to same crs as la_county\nLA_redlining3857 &lt;- st_transform(LA_redlining, st_crs(la_county))\n\n# block groups that have intersecting geometries as LA_redlining HOLC grades\n# left = FALSE for an inner join\nblock_groups_holc_join &lt;- st_join(x = la_county, y = LA_redlining3857, left = FALSE)\nholc_block_grps &lt;- nrow(block_groups_holc_join)\n\nprint(paste(holc_block_grps, \"census block groups in LA fall within areas with HOLC grades\"))\n\n\n[1] \"6388 census block groups in LA fall within areas with HOLC grades\"\n\n\nLA county has a total of 6591 block groups, so this means that the majority of block groups fall within areas that were historically graded by the HOLC. When we compare current conditions (environmental and demographic) in LA block groups by the grade they were historically assigned, we get this result:\n\n\nCode\n# summary table of means grouped by grade\nt1 &lt;- block_groups_holc_join %&gt;%\n  st_drop_geometry() %&gt;% \n  group_by(grade) %&gt;% \n  summarise(low_inc_pct_avg = mean(LOWINCPCT, na.rm = TRUE),\n            p_pm25_avg = mean(P_PM25, na.rm = TRUE),\n            p_low_life_exp_avg = mean(P_LIFEEXPPCT, na.rm = TRUE),\n            p_cancer_avg = mean(P_CANCER, na.rm = TRUE)) %&gt;% \n  gt() %&gt;% \n  tab_header(title = \"Current EJ Conditions in LA by HOLC grade\")\n\nt1\n\n\n\n\n\n\n  \n    \n      Current EJ Conditions in LA by HOLC grade\n    \n    \n    \n      grade\n      low_inc_pct_avg\n      p_pm25_avg\n      p_low_life_exp_avg\n      p_cancer_avg\n    \n  \n  \n    A\n0.1497511\n72.16036\n23.75982\n44.00670\n    B\n0.2420120\n76.33898\n37.42025\n47.68659\n    C\n0.3408981\n78.81884\n47.88017\n54.55468\n    D\n0.3919059\n80.23700\n53.03621\n56.57589\n    NA\n0.3581823\n76.72973\n50.12409\n41.49324\n  \n  \n  \n\n\n\n\nBased on the averages calculated, the HOLC grade for a census block group in LA appears to be indicative of the percent of the population that is low income, as well as the percentiles they fall within for environmental justice indicators. Groups with a grade of “A” had the lowest average percent of low income (15%), and had an average of the lowest percentiles, comparatively, for PM 2.5, low life expectancy, and air toxics cancer risk. In comparison, areas with a grade of “D” had the highest average percent of low income (39%) and had the highest average percentiles for PM 2.5, low life expectancy, and air toxics cancer risk.\n\n\n\n\nLet’s add bird observations in LA from the year 2022 to our analysis. We want to know if the redlined neighborhoods in LA are undersampled in terms of bird observations. Calculating the percent of total observations in each HOLC grade should get us to an answer.\n\n\nCode\n# plot % of bird observations by HOLC\nggplot(data = holc_birds_pct) +\n  geom_col(aes(x = grade, y = bird_pct_obs, fill = grade),\n           show.legend = FALSE) +\n  scale_fill_discrete(type = c(\"green\", \"blue\", \"yellow\", \"red\", \"grey\")) +\n  labs(x = \"HOLC Grade\",\n       y = \"% Bird Observations\",\n       title = \"Bird Observations in Redlining Categories\") +\n  theme_bw()\n\n\n\n\n\nBased on the findings of Ellis-Soto and co-authors, we would expect to see high percentages in A and B areas and low percentages in C and D areas. Surprisingly, the largest share of bird observations are in areas that were historically graded a C, the second largest share in areas historically graded a D, or historically redlined areas of Los Angeles. This could potentially be a result of LA’s population skyrocketing since 1933 and consequently leading to gentrification of redlined neighborhoods."
  },
  {
    "objectID": "blog/2023-12-15-eds223-la-redlining-biodiversity-obs/index.html#conclusion",
    "href": "blog/2023-12-15-eds223-la-redlining-biodiversity-obs/index.html#conclusion",
    "title": "Historic redlining and biodiveristy observations in Los Angeles County",
    "section": "",
    "text": "Redlining has lasting impacts on environmental and demographic indicators in LA county census block groups. When comparing across grades (A to D), we saw percent of low income increase as well as the percentiles for low life expectancy and exposure to PM 2.5 and air toxics with cancer risk. Therefore, in line with the research, health and quality of life decrease in historically redlined areas. However, we surprisingly found that these areas accounted for a high proportion of bird biodiversity observations, in contrast with the findings of Ellis-Soto and co-authors. This may be for a multitude of reasons that are not yet apparent. The gentrification of redlined neighborhoods is definitely a possibility."
  },
  {
    "objectID": "blog/2023-12-15-eds223-la-redlining-biodiversity-obs/index.html#footnotes",
    "href": "blog/2023-12-15-eds223-la-redlining-biodiversity-obs/index.html#footnotes",
    "title": "Historic redlining and biodiveristy observations in Los Angeles County",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nGee, G. C. (2008). A multilevel analysis of the relationship between institutional and individual racial discrimination and health status. American journal of public health, 98(Supplement_1), S48-S56.↩︎\nNardone, A., Rudolph, K. E., Morello-Frosch, R., & Casey, J. A. (2021). Redlines and greenspace: the relationship between historical redlining and 2010 greenspace across the United States. Environmental health perspectives, 129(1), 017006.↩︎\nHoffman, J. S., Shandas, V., & Pendleton, N. (2020). The effects of historical housing policies on resident exposure to intra-urban heat: a study of 108 US urban areas. Climate, 8(1), 12.↩︎\nLee E. K., Donley G., Ciesielski T. H., Gill I., Yamoah O., Roche A., Martinez R., Freedman D. A. (2022). Health outcomes in redlined versus non-redlined neighborhoods: A systematic review and meta-analysis. Soc Sci Med, 294, 114696. doi: 10.1016/j.socscimed.2021.114696.↩︎\nRobert K. Nelson, LaDale Winling, Richard Marciano, Nathan Connolly, et al., “Mapping Inequality,” American Panorama, ed. Robert K. Nelson and Edward L. Ayers, accessed October 17, 2023, https://dsl.richmond.edu/panorama/redlining/↩︎\nRobert K. Nelson, LaDale Winling, Richard Marciano, Nathan Connolly, et al., “Mapping Inequality,” American Panorama, ed. Robert K. Nelson and Edward L. Ayers, accessed October 17, 2023, https://dsl.richmond.edu/panorama/redlining/↩︎"
  },
  {
    "objectID": "about.html#education",
    "href": "about.html#education",
    "title": "About",
    "section": "Education",
    "text": "Education\nMaster of Environmental Data Science, UCSB (expected 2024)\nBS, Chemistry, minor in Dance, Cal Poly SLO (2022)"
  },
  {
    "objectID": "about.html#background",
    "href": "about.html#background",
    "title": "About",
    "section": "",
    "text": "In 2022, I graduated from California Polytechnic State University, San Luis Obispo (Cal Poly SLO) with a bachelor’s degree in Chemistry and a minor in Dance. During my undergraduate career, I participated in research at Cal Poly SLO in ocean carbonate chemistry, where I was involved in all steps of creating and maintaining an oceanographic time series. In the summer of 2021, I participated in an NSF-funded Research Experience for Undergraduates (REU) program at the University of Rhode Island Graduate School of Oceanography. As a research intern, I created a reproducible workflow to post-calibrate continuous chlorophyll-a data collected from six seasonal transect cruises conducted off the coast of Rhode Island. My project was part of the Northeast U.S. Shelf Long-Term Ecological Research (NES-LTER) site and introduced me to the fascinating work of collaborating and synthesizing data to understand the environments around us. Read more about my project here! Overall, I’m interested in using data science to collaboratively characterize natural environments and understand the impacts of a changing climate."
  },
  {
    "objectID": "blog/2024-03-12-ca-wildfires/index.html",
    "href": "blog/2024-03-12-ca-wildfires/index.html",
    "title": "Are California Wildfires Truly Getting Worse?",
    "section": "",
    "text": "2020 was California’s worst recorded wildfire season since the 17th century, with 9,917 fires burning close to a total of 4 million acres. Lately, there has been a lot of discussion about if California wildfires have gotten worse in recent years (see here and here). Therefore, I wanted to conduct my own exploration to answer the burning question: Have California wildfires truly become worse in recent years? In order to answer this overarching question, I defined three smaller questions to direct my data exploration and visualization:\n\nHow has the size of the largest annual fire changed over time (1980 - 2022)?\nHow has the total amount of acres burned each month changed over time (1980 - 2022)?\nHow has the average number of fires impacting each California county changed since the 1980s?\n\n\n\n\n(1) Fire Data\nI am using California fire perimeters data from the California Department of Forestry and Fire Protection (CAL FIRE) on the California Open Data Portal. The relevant variables I used in my data visualization include:\n\nYEAR: year the fire burned\nFIRE_NAME: given name of fire\nALARM_DATE: date the fire first began\nCONT_DATE: date the fire was declared contained\nGIS_ACRES: total acres burned by the fire\ngeometry: shape of the perimeter of the full fire\n\n(2) California County Subdivision TIGER/Line Shapefiles\nAdditionally, I am using shapefiles from the United States Census Bureau of all counties in the state of California.\n\n\n\nClean data\n\n\nCode\n# county data ---\n# clean names \nca_counties_clean &lt;- ca_counties %&gt;% \n  janitor::clean_names() %&gt;% \n  # select relevant columns\n  select(name, geometry)\n\n# fire data ----\n# clean names\nca_fires_clean &lt;- ca_fires_shape %&gt;% janitor::clean_names() %&gt;% \n  # select necessary columns\n  select(year, fire_name, alarm_date, cont_date, gis_acres, geometry) \n\n# Spatially join data to find what counties were impacted by what fires\nca_county_fires &lt;- st_join(ca_fires_clean, ca_counties_clean) %&gt;% \n  rename(county_name = name)\n\n\nFonts and color palette\n\n\nCode\n# import fonts\nfont_add_google(name = \"Quicksand\", family = \"Quicksand\")\n\n# enable {showtext} for rendering\nshowtext_auto()\n\n# define red to be used throughout\nred &lt;- \"#FE4A49\"\n\n# define diverging color palette for choropleth map\nfire_pal &lt;- c(\"#FE4A49\",\n              \"#FF7944\",\n              \"#F7F3E3\",\n              \"#C0D6E9\",\n              \"#5791C4\")\n\n\n\n\nTo answer this first question, I created a histogram of the total acres burned by the largest fire recorded each year so that I could compare across the 40 years. I added a dashed line at the number of acres burned by the average largest fire in that timeframe so that we could see if there is a pattern over time of when the fires exceed that average value. Additionally, I used gghighlight to highlight the 3 largest fires that burned between 1980 and 2022, all of which happened in the past 6 years.\n\n\nCode\n# select largest fires each year\nca_largest_fires &lt;- ca_fires_clean %&gt;% \n  st_drop_geometry() %&gt;% \n  # select years 1980-2022\n  filter(year %in% (1980:2022)) %&gt;% \n  # Majority of biscuit fire burned in Oregon so removing it\n  filter(fire_name != \"BISCUIT\") %&gt;% \n  group_by(year) %&gt;% \n  # select largest (by acres) for each year\n  slice_max(order_by = gis_acres, n = 1)\n\n# create plot\nlargest_fires &lt;- ggplot(data = ca_largest_fires) +\n  # add horizontal line at the average size of the largest fire from 1908-2022\n  geom_hline(yintercept = mean(ca_largest_fires$gis_acres),\n             color = \"white\",\n             linetype = \"dashed\") +\n  # add columns indicating how large each fire was\n  geom_col(aes(x = year, y = gis_acres), fill = red) +\n  gghighlight(year %in% c(2018, 2020, 2021)) +\n  labs(y = \"Total Acres Burned\",\n       x = \"\",\n       title = \"Largest Recorded California Wildfires (1980-2022)\",\n       subtitle = \"The top 3 largest wildfires have burned in the last 6 years\") +\n  # choose x axis labels\n  scale_x_discrete(breaks = c(1980, 1985, 1990, 1995, 2000, 2005, 2010, 2015, 2020)) +\n  # add commas to large numbers on y-axis\n  scale_y_continuous(labels = scales::label_comma(),\n                     expand = c(0,0),\n                     limits = c(0, 1100000)) +\n  # add annotation to label the average line\n  annotate(\n    geom = \"text\",\n    # coord for text to live\n    x = 1, y = 280000,\n    label = \"Size of average largest fire in the last 40 years\",\n    size = 16,\n    family = \"Quicksand\",\n    fontface = 2,\n    color = \"white\",\n    # so it doesn't run off plot space\n    hjust = \"inward\"\n  ) +\n  # add arrow from annotation to average line\n  annotate(\n    geom = \"curve\",\n    x = 11.5, xend = 14,\n    y = 235000, yend = 160000,\n    curvature = -0.15,\n    arrow = arrow(length = unit(0.3, \"cm\")),\n    linewidth = 1,\n    color = \"white\"\n  ) +\n  # label Ranch Fire\n  annotate(\n    geom = \"text\",\n    x = 27, y = 445000,\n    label = \"Ranch Fire (410,203 acres)\",\n    color = red,\n    size = 16,\n    family = \"Quicksand\",\n    fontface = 2\n  ) +\n  # add arrow to Ranch Fire annotation\n  annotate(\n    geom = \"curve\",\n    x = 33, xend = 38,\n    y = 440000, yend = 375000,\n    curvature = 0.1,\n    arrow = arrow(length = unit(0.3, \"cm\")),\n    color = red,\n    linewidth = 1\n  ) +\n  # label August Complex Fire\n  annotate(\n    geom = \"text\",\n    x = 30, y = 800000,\n    label= \"August Complex Fire (1,032,699 acres)\",\n    color = red,\n    size = 16,\n    family = \"Quicksand\",\n    fontface = 2\n  ) +\n  # add arrow to August Complex Fire annotation\n  annotate(\n    geom = \"curve\",\n    x = 36, xend = 40,\n    y = 750000, yend = 700000,\n    curvature = 0.5,\n    arrow = arrow(length = unit(0.3, \"cm\")),\n    color = red,\n    linewidth = 1\n  ) +\n  # label Dixie Fire\n  annotate(\n    geom = \"text\",\n    x = 33, y = 1050000,\n    label= \"Dixie Fire (963,405 acres)\",\n    color = red,\n    size = 16,\n    family = \"Quicksand\",\n    fontface = 2\n  ) +\n  # add arrow to Dixie Fire annotation\n  annotate(\n    geom = \"curve\",\n    x = 38.5, xend = 42,\n    y = 1050000, yend = 974000,\n    curvature = -0.6,\n    arrow = arrow(length = unit(0.3, \"cm\")),\n    color = red,\n    linewidth = 1\n  ) +\n  theme( \n    # remove unnecessary gridlines\n    panel.grid.major.x = element_blank(),\n    panel.grid.minor.y = element_blank(),\n    # thinner y-axis gridlines\n    panel.grid.major.y = element_line(linewidth = 0.25),\n    # define title size, fontface, margins, and adjust left\n    plot.title = element_text(size = 56,\n                              face = \"bold\", \n                              margin = margin(t = 0, r = 0, \n                                              b = 0.25, l = 0, \n                                              unit= \"cm\"),\n                              hjust = 0),\n    # define subtitle size and adjust left\n    plot.subtitle = element_text(size = 48,\n                                 hjust = 0),\n    # black plot background\n    plot.background = element_rect(fill = \"black\",\n                                   color = \"black\"),\n    # black panel background\n    panel.background = element_rect(fill = \"black\"),\n    # define white color and font family for all text\n    text = element_text(color = \"white\", family = \"Quicksand\"),\n    # define axis title and text size\n    axis.title = element_text(size = 45),\n    axis.text = element_text(color = \"white\", size = 40),\n    # define color of x axis line and tick marks\n    axis.ticks.x = element_line(color = \"white\"),\n    axis.line.x = element_line(color = \"white\"),\n    # adjust aspect ratio to widen plot\n    aspect.ratio = 0.35\n  )\n\nlargest_fires\n\n\n\n\n\n\nThis plot was inspired by Christophe Nicault’s Tidy Tuesday visualization. Since all of my plots include a time element, I wanted to experiment with demonstrating that time element in a different way for each plot. The colors used by Nicault looked just like fire to me and I loved the circular plot for showing time on a monthly scale. Therefore, I used Nicault’s code as a framework to build a similar plot to investigate how many acres were burned each month across California and across the years 1980 to 2022.\n\n\nCode\n# create table with total acres burned each month from 1980-2022\ncalendar &lt;- ca_fires_clean %&gt;% \n  # drop geometries\n  st_drop_geometry() %&gt;% \n  # convert year to date\n  mutate(year = as.Date(year, format = \"%Y\")) %&gt;% \n  mutate(year = year(year)) %&gt;%\n  # select 1980-2022\n  filter(year %in% c(1980:2022)) %&gt;% \n  # grab month out of fire alarm date\n  mutate(month = month(alarm_date)) %&gt;%\n  group_by(year, month) %&gt;%  \n  # calculate total acres burned each month of each year\n  summarise(monthly_total = sum(gis_acres)) %&gt;%  \n  ungroup()\n\n# duplicate january for the circular plot\nmonth13 &lt;- calendar %&gt;%  \n  filter(month == 1) %&gt;%  \n  mutate(year = (year - 1),\n         month = 13)\n\n# designate where month labels will go\ndates_axis &lt;- tibble(x = seq(1,12,1),\n                     y = c(rep(2000000,7), 3000000, rep(2000000, 4)),\n                     mth = lubridate::month(seq(1,12,1), abbr=TRUE, label = TRUE))\n\n# create plot\nmonthly &lt;- calendar %&gt;%   \n  bind_rows(month13) %&gt;% \n  bind_rows(month13) %&gt;%   # https://stackoverflow.com/questions/66821598/why-is-ggplot-geom-ribbon-area-failing-with-facets-coord-polar-with-specific\n  arrange(desc(year)) %&gt;% \n  ggplot(aes(month, monthly_total, group = year, fill = year, alpha = 2040-year))+\n  # area plot of total acres burned monthly\n  geom_area(position=\"identity\", alpha = 0.2) +\n  # outline area plot\n  geom_line(aes(color = year), linewidth = 0.1, alpha = 1) +\n  # add month labels\n  geom_text(data=dates_axis, aes(x = x, y = y, label = mth), color =\"white\",\n            inherit.aes = FALSE, size = 12) +\n  # polar coordinates for circle\n  coord_polar(start = pi) +\n  # choose color gradient\n  scale_fill_gradient(low = \"yellow\", high = \"#FE4A49\")+\n  scale_color_gradient(low = \"yellow\", high = \"#FE4A49\")+\n  scale_y_continuous(limits = c(0,3000000), \n                     # expand center of circle\n                     expand = expansion(mult = c(0.3, 0))\n  ) +\n  # define breaks along x axis for each month\n  scale_x_continuous(breaks = seq(1,12,1), \n                     limits = c(1,13), \n                     labels = lubridate::month(seq(1,12,1), \n                                               abbr=TRUE, \n                                               label = TRUE))+\n  # remove axes, etc.\n  theme_void()+\n  guides(color = \"none\", alpha = \"none\",\n         # adjust length and height of color bar\n         fill = guide_colorbar(barwidth = 16, barheight = 0.2)) +\n  labs(title = \"Monthly acres burned by wildfires (1980-2022)\",\n       fill = \"\") +\n  theme(legend.direction = \"horizontal\",\n        legend.position = \"top\",\n        # define color and font family for all text\n        text = element_text(color = \"white\", family = \"Quicksand\"),\n        # define size, fontface, margin and center title\n        plot.title = element_text(size = 38,\n                                  face = \"bold\", \n                                  hjust = 0.5,\n                                  margin = margin(t = 0.25, r = 0, \n                                                  b = 0.5, l = 0, \n                                                  unit = \"cm\")),\n        # define size of legend text\n        legend.text = element_text(size = 22),\n        # define margins of legend to decrease black space between legend and plot\n        legend.box.margin = margin(t = 0, r = 0, b = -1, l = 0, unit = \"cm\"),\n        # black plot background\n        panel.background = element_rect(fill = \"black\"),\n        plot.background = element_rect(fill = \"black\"),\n        plot.margin = margin(unit(c(0, 0, 0, 0), \"cm\"))) +\n  # add annotation for largest amount of acres burned in one month\n  annotate(\n    geom = \"text\",\n    x = 8.65, y = 2900000,\n    label= \"2.9 mil acres (Aug 2020)\",\n    color = red,\n    size = 10, family = \"Quicksand\",\n    face = \"bold\")\n\n\nmonthly\n\n\n\n\n\n\nThe first two plots were focusing more on severity of fires, so I wanted this plot to investigate the frequency of fires, i.e. are fires getting larger AND happening more often? To do this I spatially joined the fire and county data to find what counties were impacted by what fires. From there, I was able to count how many fires impacted each county each year. In order to compare over time, I calculated the average number of fires that impacted each county over the 1980s and the 2010s (I didn’t use the 2020s because I wanted a full decade of data). I subtracted the average in the 1980s from the average in the 2010s to find the change in fire frequency. I plotted this as a choropleth map, color each California county by the change in average number of fires impacting them. Positive values indicated that on average more fires affected those counties in the 2010s and negative values indicated that on average less fires affected those counties in the 2010s.\n\n\nCode\n# count average number of fires occurring in each county 1980s\ncounty_counts_80 &lt;- ca_county_fires %&gt;% \n  st_drop_geometry() %&gt;% \n  filter(year %in% c(1980:1989)) %&gt;% \n  group_by(county_name, year) %&gt;% \n  summarize(sum_80 = n()) %&gt;% \n  group_by(county_name) %&gt;% \n  summarize(avg_num_80 = round(mean(sum_80, na.rm = TRUE), 2)) %&gt;% \n  rename(name = county_name)\n\n# count average number of fires occurring in each county 2010s\ncounty_counts_10 &lt;- ca_county_fires %&gt;% \n  st_drop_geometry() %&gt;% \n  filter(year %in% c(2010:2019)) %&gt;% \n  group_by(county_name, year) %&gt;% \n  summarize(sum_10 = n()) %&gt;% \n  group_by(county_name) %&gt;% \n  summarize(avg_num_10 = round(mean(sum_10, na.rm = TRUE), 2)) %&gt;% \n  rename(name = county_name)\n\n# join average number of fires from each decade and calculate difference\ncounty_counts &lt;- full_join(county_counts_10, county_counts_80)\ncounty_change &lt;- county_counts %&gt;% \n  mutate(change = avg_num_10 - avg_num_80)\n\n# remove small islands\nca_counties_clean_no_island &lt;- ca_counties_clean %&gt;% ms_filter_islands(min_area = 1e13)\n\n# add fire counts to county dataset\nca_counties_counts &lt;- full_join(ca_counties_clean_no_island, county_change)\n\n# define title and subtitle\ntitle &lt;- \"Change in the Number of Wildfires Affecting California Counties\"\nsubtitle &lt;- \"The difference between the average number of wildfires in the 2010s and the 1980s, per county, where a negative value indicates a decrease in fires over time and a positive value indicates an increase in fires over time.\"\n\n# create choropleth map\nmap_change &lt;- ggplot() +\n  geom_sf(data = ca_counties_counts, \n          aes(fill = change),\n          color = \"black\") +\n  scale_fill_gradientn(colors = rev(fire_pal),\n                       na.value = \"grey70\",\n                       # make sure white is at 0\n                       values = scales::rescale(x = c(\n                         min(na.omit(ca_counties_counts)$change),\n                         0,\n                         max(na.omit(ca_counties_counts)$change)\n                       ))) +\n  # add title and subtitle\n  labs(title = str_wrap(title, 50),\n       subtitle = str_wrap(subtitle, 60),\n       fill = \"\") +\n  theme_void() +\n  guides(fill = guide_colorbar(barwidth = 20, barheight = 0.75)) +\n  theme(legend.position = \"bottom\",\n        # define title font family, font face, size, margins, and center\n        plot.title = element_text(family = \"Quicksand\", \n                                  face = \"bold\", \n                                  size = 48,\n                                  margin = margin(t = 0.25, r = 0, \n                                                  b = 0.25, l = 0, \n                                                  unit = \"cm\"),\n                                  hjust = 0.5),\n        # define subtitle font family, size and center\n        plot.subtitle = element_text(family = \"Quicksand\", size = 36, hjust = 0.5),\n        # black plot background\n        plot.background = element_rect(fill = \"black\",\n                                       color = \"black\"),\n        # legend text color, size, and font family\n        legend.title = element_text(color = \"white\"),\n        legend.text = element_text(color = \"white\", family = \"Quicksand\", size = 12),\n        text = element_text(color = \"white\"))\n\nmap_change\n\n\n\n\n\nca_choropleth\n\n\n\n\n\nI joined all the plots together into a final infographic. Outside of R, I added some fire icons as well as a couple annotations with major takeaways from my visuals.\n\n\n\n\n\nGraphic form: The histogram was the best way to compare the acres burned by the largest fires each year across time. I wanted to include a visualization with the map of California since this was the study area, so I found that a choropleth map was the best way to do this. Lastly, I was inspired by this (insert link) plot because it both looked a bit like fire and was a unique way to plot across time that I hadn’t encountered before. I wanted to stretch myself, so I used Christophe Nicault’s code as a guiding framework to build my own.\nText: I used the same typeface across all of my plots, increasing the size and bolding titles and important words. Additionally, I added annotations to my histogram and circular plot in a fire red color I used throughout my infographic to provide specific values and more information.\nThemes: Since this is an infographic, I removed as many axes and unnecessary theme elements as possible to keep my plots simple and, hopefully, easily interpretable. Since I was using “fire” colors such as bright yellow and orange, especially in my circular plot, I plotted everything against a black background for more emphasis.\nColors: As I mentioned briefly above, I used a lot of bright reds, yellows, and oranges to simulate fire. I used a black background so that the bright colors are easily seen and look more fire-like. For my choropleth map, I am plotting negative and positive values, so I created a divergent color gradient. I used bright red to indicate large positive numbers (an increase in average number of fires) and blue to indicate large negative numbers (a decrease in average number of fires). I chose blue because the color is typically associated with coolness and water, which I believe are opposites of fire.\nTypography: The typeface I chose, Quicksand, had many font options available and is sans serif. This was ideal because it makes it easier for audiences to read, and I feel like it adds a casualness to the infographic that I hope will make it less intimidating to audiences that are less familiar with interpreting data visualizations.\nGeneral design: I made the overall title the largest size and additionally made the written takeaways from each plot a larger size so that they could not be missed. I limited my subtitles to only pertinent information and kept the takeaways concise to avoid information overload. I made the choropleth map large enough to serve both as a reminder that this data is about California and so that the audience can clearly interpret color differences.\nContextualization: The California map, colors used throughout, and the fire images all work together to contextualize the California wildfire data.\nCentering your primary message: I had so many ways I wanted to present this data, but I focused each of my plots on investigating change over time of either severity or frequency of fires. As written in my takeaway annotations, it is hard to say for sure, but it appears that California wildfires have increased in both frequency and severity since 1980.\nConsidering accessibility: The colors I used are colorblind-friendly and I ensured that all text and background colors meet or exceed the contrast ratio of 4.5:1. I have added alt text to my final infographic.\nApplying a DEI lens: The infographic was designed so that someone with little knowledge of California wildfires could understand if the fires are getting worse. I took a very broad approach by visualizing across the entirety of the state, but I would need to do more if this exploration were to be used to direct future actions related to wildfires as communities that are underrepresented are often the most vulnerable to these wildfires."
  },
  {
    "objectID": "blog/2024-03-12-ca-wildfires/index.html#driving-questions",
    "href": "blog/2024-03-12-ca-wildfires/index.html#driving-questions",
    "title": "Are California Wildfires Truly Getting Worse?",
    "section": "",
    "text": "2020 was California’s worst recorded wildfire season since the 17th century, with 9,917 fires burning close to a total of 4 million acres. Lately, there has been a lot of discussion about if California wildfires have gotten worse in recent years (see here and here). Therefore, I wanted to conduct my own exploration to answer the burning question: Have California wildfires truly become worse in recent years? In order to answer this overarching question, I defined three smaller questions to direct my data exploration and visualization:\n\nHow has the size of the largest annual fire changed over time (1980 - 2022)?\nHow has the total amount of acres burned each month changed over time (1980 - 2022)?\nHow has the average number of fires impacting each California county changed since the 1980s?"
  },
  {
    "objectID": "blog/2024-03-12-ca-wildfires/index.html#the-data",
    "href": "blog/2024-03-12-ca-wildfires/index.html#the-data",
    "title": "Are California Wildfires Truly Getting Worse?",
    "section": "",
    "text": "(1) Fire Data\nI am using California fire perimeters data from the California Department of Forestry and Fire Protection (CAL FIRE) on the California Open Data Portal. The relevant variables I used in my data visualization include:\n\nYEAR: year the fire burned\nFIRE_NAME: given name of fire\nALARM_DATE: date the fire first began\nCONT_DATE: date the fire was declared contained\nGIS_ACRES: total acres burned by the fire\ngeometry: shape of the perimeter of the full fire\n\n(2) California County Subdivision TIGER/Line Shapefiles\nAdditionally, I am using shapefiles from the United States Census Bureau of all counties in the state of California."
  },
  {
    "objectID": "blog/2024-03-12-ca-wildfires/index.html#infographic-plots",
    "href": "blog/2024-03-12-ca-wildfires/index.html#infographic-plots",
    "title": "Are California Wildfires Truly Getting Worse?",
    "section": "",
    "text": "Clean data\n\n\nCode\n# county data ---\n# clean names \nca_counties_clean &lt;- ca_counties %&gt;% \n  janitor::clean_names() %&gt;% \n  # select relevant columns\n  select(name, geometry)\n\n# fire data ----\n# clean names\nca_fires_clean &lt;- ca_fires_shape %&gt;% janitor::clean_names() %&gt;% \n  # select necessary columns\n  select(year, fire_name, alarm_date, cont_date, gis_acres, geometry) \n\n# Spatially join data to find what counties were impacted by what fires\nca_county_fires &lt;- st_join(ca_fires_clean, ca_counties_clean) %&gt;% \n  rename(county_name = name)\n\n\nFonts and color palette\n\n\nCode\n# import fonts\nfont_add_google(name = \"Quicksand\", family = \"Quicksand\")\n\n# enable {showtext} for rendering\nshowtext_auto()\n\n# define red to be used throughout\nred &lt;- \"#FE4A49\"\n\n# define diverging color palette for choropleth map\nfire_pal &lt;- c(\"#FE4A49\",\n              \"#FF7944\",\n              \"#F7F3E3\",\n              \"#C0D6E9\",\n              \"#5791C4\")\n\n\n\n\nTo answer this first question, I created a histogram of the total acres burned by the largest fire recorded each year so that I could compare across the 40 years. I added a dashed line at the number of acres burned by the average largest fire in that timeframe so that we could see if there is a pattern over time of when the fires exceed that average value. Additionally, I used gghighlight to highlight the 3 largest fires that burned between 1980 and 2022, all of which happened in the past 6 years.\n\n\nCode\n# select largest fires each year\nca_largest_fires &lt;- ca_fires_clean %&gt;% \n  st_drop_geometry() %&gt;% \n  # select years 1980-2022\n  filter(year %in% (1980:2022)) %&gt;% \n  # Majority of biscuit fire burned in Oregon so removing it\n  filter(fire_name != \"BISCUIT\") %&gt;% \n  group_by(year) %&gt;% \n  # select largest (by acres) for each year\n  slice_max(order_by = gis_acres, n = 1)\n\n# create plot\nlargest_fires &lt;- ggplot(data = ca_largest_fires) +\n  # add horizontal line at the average size of the largest fire from 1908-2022\n  geom_hline(yintercept = mean(ca_largest_fires$gis_acres),\n             color = \"white\",\n             linetype = \"dashed\") +\n  # add columns indicating how large each fire was\n  geom_col(aes(x = year, y = gis_acres), fill = red) +\n  gghighlight(year %in% c(2018, 2020, 2021)) +\n  labs(y = \"Total Acres Burned\",\n       x = \"\",\n       title = \"Largest Recorded California Wildfires (1980-2022)\",\n       subtitle = \"The top 3 largest wildfires have burned in the last 6 years\") +\n  # choose x axis labels\n  scale_x_discrete(breaks = c(1980, 1985, 1990, 1995, 2000, 2005, 2010, 2015, 2020)) +\n  # add commas to large numbers on y-axis\n  scale_y_continuous(labels = scales::label_comma(),\n                     expand = c(0,0),\n                     limits = c(0, 1100000)) +\n  # add annotation to label the average line\n  annotate(\n    geom = \"text\",\n    # coord for text to live\n    x = 1, y = 280000,\n    label = \"Size of average largest fire in the last 40 years\",\n    size = 16,\n    family = \"Quicksand\",\n    fontface = 2,\n    color = \"white\",\n    # so it doesn't run off plot space\n    hjust = \"inward\"\n  ) +\n  # add arrow from annotation to average line\n  annotate(\n    geom = \"curve\",\n    x = 11.5, xend = 14,\n    y = 235000, yend = 160000,\n    curvature = -0.15,\n    arrow = arrow(length = unit(0.3, \"cm\")),\n    linewidth = 1,\n    color = \"white\"\n  ) +\n  # label Ranch Fire\n  annotate(\n    geom = \"text\",\n    x = 27, y = 445000,\n    label = \"Ranch Fire (410,203 acres)\",\n    color = red,\n    size = 16,\n    family = \"Quicksand\",\n    fontface = 2\n  ) +\n  # add arrow to Ranch Fire annotation\n  annotate(\n    geom = \"curve\",\n    x = 33, xend = 38,\n    y = 440000, yend = 375000,\n    curvature = 0.1,\n    arrow = arrow(length = unit(0.3, \"cm\")),\n    color = red,\n    linewidth = 1\n  ) +\n  # label August Complex Fire\n  annotate(\n    geom = \"text\",\n    x = 30, y = 800000,\n    label= \"August Complex Fire (1,032,699 acres)\",\n    color = red,\n    size = 16,\n    family = \"Quicksand\",\n    fontface = 2\n  ) +\n  # add arrow to August Complex Fire annotation\n  annotate(\n    geom = \"curve\",\n    x = 36, xend = 40,\n    y = 750000, yend = 700000,\n    curvature = 0.5,\n    arrow = arrow(length = unit(0.3, \"cm\")),\n    color = red,\n    linewidth = 1\n  ) +\n  # label Dixie Fire\n  annotate(\n    geom = \"text\",\n    x = 33, y = 1050000,\n    label= \"Dixie Fire (963,405 acres)\",\n    color = red,\n    size = 16,\n    family = \"Quicksand\",\n    fontface = 2\n  ) +\n  # add arrow to Dixie Fire annotation\n  annotate(\n    geom = \"curve\",\n    x = 38.5, xend = 42,\n    y = 1050000, yend = 974000,\n    curvature = -0.6,\n    arrow = arrow(length = unit(0.3, \"cm\")),\n    color = red,\n    linewidth = 1\n  ) +\n  theme( \n    # remove unnecessary gridlines\n    panel.grid.major.x = element_blank(),\n    panel.grid.minor.y = element_blank(),\n    # thinner y-axis gridlines\n    panel.grid.major.y = element_line(linewidth = 0.25),\n    # define title size, fontface, margins, and adjust left\n    plot.title = element_text(size = 56,\n                              face = \"bold\", \n                              margin = margin(t = 0, r = 0, \n                                              b = 0.25, l = 0, \n                                              unit= \"cm\"),\n                              hjust = 0),\n    # define subtitle size and adjust left\n    plot.subtitle = element_text(size = 48,\n                                 hjust = 0),\n    # black plot background\n    plot.background = element_rect(fill = \"black\",\n                                   color = \"black\"),\n    # black panel background\n    panel.background = element_rect(fill = \"black\"),\n    # define white color and font family for all text\n    text = element_text(color = \"white\", family = \"Quicksand\"),\n    # define axis title and text size\n    axis.title = element_text(size = 45),\n    axis.text = element_text(color = \"white\", size = 40),\n    # define color of x axis line and tick marks\n    axis.ticks.x = element_line(color = \"white\"),\n    axis.line.x = element_line(color = \"white\"),\n    # adjust aspect ratio to widen plot\n    aspect.ratio = 0.35\n  )\n\nlargest_fires\n\n\n\n\n\n\nThis plot was inspired by Christophe Nicault’s Tidy Tuesday visualization. Since all of my plots include a time element, I wanted to experiment with demonstrating that time element in a different way for each plot. The colors used by Nicault looked just like fire to me and I loved the circular plot for showing time on a monthly scale. Therefore, I used Nicault’s code as a framework to build a similar plot to investigate how many acres were burned each month across California and across the years 1980 to 2022.\n\n\nCode\n# create table with total acres burned each month from 1980-2022\ncalendar &lt;- ca_fires_clean %&gt;% \n  # drop geometries\n  st_drop_geometry() %&gt;% \n  # convert year to date\n  mutate(year = as.Date(year, format = \"%Y\")) %&gt;% \n  mutate(year = year(year)) %&gt;%\n  # select 1980-2022\n  filter(year %in% c(1980:2022)) %&gt;% \n  # grab month out of fire alarm date\n  mutate(month = month(alarm_date)) %&gt;%\n  group_by(year, month) %&gt;%  \n  # calculate total acres burned each month of each year\n  summarise(monthly_total = sum(gis_acres)) %&gt;%  \n  ungroup()\n\n# duplicate january for the circular plot\nmonth13 &lt;- calendar %&gt;%  \n  filter(month == 1) %&gt;%  \n  mutate(year = (year - 1),\n         month = 13)\n\n# designate where month labels will go\ndates_axis &lt;- tibble(x = seq(1,12,1),\n                     y = c(rep(2000000,7), 3000000, rep(2000000, 4)),\n                     mth = lubridate::month(seq(1,12,1), abbr=TRUE, label = TRUE))\n\n# create plot\nmonthly &lt;- calendar %&gt;%   \n  bind_rows(month13) %&gt;% \n  bind_rows(month13) %&gt;%   # https://stackoverflow.com/questions/66821598/why-is-ggplot-geom-ribbon-area-failing-with-facets-coord-polar-with-specific\n  arrange(desc(year)) %&gt;% \n  ggplot(aes(month, monthly_total, group = year, fill = year, alpha = 2040-year))+\n  # area plot of total acres burned monthly\n  geom_area(position=\"identity\", alpha = 0.2) +\n  # outline area plot\n  geom_line(aes(color = year), linewidth = 0.1, alpha = 1) +\n  # add month labels\n  geom_text(data=dates_axis, aes(x = x, y = y, label = mth), color =\"white\",\n            inherit.aes = FALSE, size = 12) +\n  # polar coordinates for circle\n  coord_polar(start = pi) +\n  # choose color gradient\n  scale_fill_gradient(low = \"yellow\", high = \"#FE4A49\")+\n  scale_color_gradient(low = \"yellow\", high = \"#FE4A49\")+\n  scale_y_continuous(limits = c(0,3000000), \n                     # expand center of circle\n                     expand = expansion(mult = c(0.3, 0))\n  ) +\n  # define breaks along x axis for each month\n  scale_x_continuous(breaks = seq(1,12,1), \n                     limits = c(1,13), \n                     labels = lubridate::month(seq(1,12,1), \n                                               abbr=TRUE, \n                                               label = TRUE))+\n  # remove axes, etc.\n  theme_void()+\n  guides(color = \"none\", alpha = \"none\",\n         # adjust length and height of color bar\n         fill = guide_colorbar(barwidth = 16, barheight = 0.2)) +\n  labs(title = \"Monthly acres burned by wildfires (1980-2022)\",\n       fill = \"\") +\n  theme(legend.direction = \"horizontal\",\n        legend.position = \"top\",\n        # define color and font family for all text\n        text = element_text(color = \"white\", family = \"Quicksand\"),\n        # define size, fontface, margin and center title\n        plot.title = element_text(size = 38,\n                                  face = \"bold\", \n                                  hjust = 0.5,\n                                  margin = margin(t = 0.25, r = 0, \n                                                  b = 0.5, l = 0, \n                                                  unit = \"cm\")),\n        # define size of legend text\n        legend.text = element_text(size = 22),\n        # define margins of legend to decrease black space between legend and plot\n        legend.box.margin = margin(t = 0, r = 0, b = -1, l = 0, unit = \"cm\"),\n        # black plot background\n        panel.background = element_rect(fill = \"black\"),\n        plot.background = element_rect(fill = \"black\"),\n        plot.margin = margin(unit(c(0, 0, 0, 0), \"cm\"))) +\n  # add annotation for largest amount of acres burned in one month\n  annotate(\n    geom = \"text\",\n    x = 8.65, y = 2900000,\n    label= \"2.9 mil acres (Aug 2020)\",\n    color = red,\n    size = 10, family = \"Quicksand\",\n    face = \"bold\")\n\n\nmonthly\n\n\n\n\n\n\nThe first two plots were focusing more on severity of fires, so I wanted this plot to investigate the frequency of fires, i.e. are fires getting larger AND happening more often? To do this I spatially joined the fire and county data to find what counties were impacted by what fires. From there, I was able to count how many fires impacted each county each year. In order to compare over time, I calculated the average number of fires that impacted each county over the 1980s and the 2010s (I didn’t use the 2020s because I wanted a full decade of data). I subtracted the average in the 1980s from the average in the 2010s to find the change in fire frequency. I plotted this as a choropleth map, color each California county by the change in average number of fires impacting them. Positive values indicated that on average more fires affected those counties in the 2010s and negative values indicated that on average less fires affected those counties in the 2010s.\n\n\nCode\n# count average number of fires occurring in each county 1980s\ncounty_counts_80 &lt;- ca_county_fires %&gt;% \n  st_drop_geometry() %&gt;% \n  filter(year %in% c(1980:1989)) %&gt;% \n  group_by(county_name, year) %&gt;% \n  summarize(sum_80 = n()) %&gt;% \n  group_by(county_name) %&gt;% \n  summarize(avg_num_80 = round(mean(sum_80, na.rm = TRUE), 2)) %&gt;% \n  rename(name = county_name)\n\n# count average number of fires occurring in each county 2010s\ncounty_counts_10 &lt;- ca_county_fires %&gt;% \n  st_drop_geometry() %&gt;% \n  filter(year %in% c(2010:2019)) %&gt;% \n  group_by(county_name, year) %&gt;% \n  summarize(sum_10 = n()) %&gt;% \n  group_by(county_name) %&gt;% \n  summarize(avg_num_10 = round(mean(sum_10, na.rm = TRUE), 2)) %&gt;% \n  rename(name = county_name)\n\n# join average number of fires from each decade and calculate difference\ncounty_counts &lt;- full_join(county_counts_10, county_counts_80)\ncounty_change &lt;- county_counts %&gt;% \n  mutate(change = avg_num_10 - avg_num_80)\n\n# remove small islands\nca_counties_clean_no_island &lt;- ca_counties_clean %&gt;% ms_filter_islands(min_area = 1e13)\n\n# add fire counts to county dataset\nca_counties_counts &lt;- full_join(ca_counties_clean_no_island, county_change)\n\n# define title and subtitle\ntitle &lt;- \"Change in the Number of Wildfires Affecting California Counties\"\nsubtitle &lt;- \"The difference between the average number of wildfires in the 2010s and the 1980s, per county, where a negative value indicates a decrease in fires over time and a positive value indicates an increase in fires over time.\"\n\n# create choropleth map\nmap_change &lt;- ggplot() +\n  geom_sf(data = ca_counties_counts, \n          aes(fill = change),\n          color = \"black\") +\n  scale_fill_gradientn(colors = rev(fire_pal),\n                       na.value = \"grey70\",\n                       # make sure white is at 0\n                       values = scales::rescale(x = c(\n                         min(na.omit(ca_counties_counts)$change),\n                         0,\n                         max(na.omit(ca_counties_counts)$change)\n                       ))) +\n  # add title and subtitle\n  labs(title = str_wrap(title, 50),\n       subtitle = str_wrap(subtitle, 60),\n       fill = \"\") +\n  theme_void() +\n  guides(fill = guide_colorbar(barwidth = 20, barheight = 0.75)) +\n  theme(legend.position = \"bottom\",\n        # define title font family, font face, size, margins, and center\n        plot.title = element_text(family = \"Quicksand\", \n                                  face = \"bold\", \n                                  size = 48,\n                                  margin = margin(t = 0.25, r = 0, \n                                                  b = 0.25, l = 0, \n                                                  unit = \"cm\"),\n                                  hjust = 0.5),\n        # define subtitle font family, size and center\n        plot.subtitle = element_text(family = \"Quicksand\", size = 36, hjust = 0.5),\n        # black plot background\n        plot.background = element_rect(fill = \"black\",\n                                       color = \"black\"),\n        # legend text color, size, and font family\n        legend.title = element_text(color = \"white\"),\n        legend.text = element_text(color = \"white\", family = \"Quicksand\", size = 12),\n        text = element_text(color = \"white\"))\n\nmap_change\n\n\n\n\n\nca_choropleth\n\n\n\n\n\nI joined all the plots together into a final infographic. Outside of R, I added some fire icons as well as a couple annotations with major takeaways from my visuals."
  },
  {
    "objectID": "blog/2024-03-12-ca-wildfires/index.html#design-elements",
    "href": "blog/2024-03-12-ca-wildfires/index.html#design-elements",
    "title": "Are California Wildfires Truly Getting Worse?",
    "section": "",
    "text": "Graphic form: The histogram was the best way to compare the acres burned by the largest fires each year across time. I wanted to include a visualization with the map of California since this was the study area, so I found that a choropleth map was the best way to do this. Lastly, I was inspired by this (insert link) plot because it both looked a bit like fire and was a unique way to plot across time that I hadn’t encountered before. I wanted to stretch myself, so I used Christophe Nicault’s code as a guiding framework to build my own.\nText: I used the same typeface across all of my plots, increasing the size and bolding titles and important words. Additionally, I added annotations to my histogram and circular plot in a fire red color I used throughout my infographic to provide specific values and more information.\nThemes: Since this is an infographic, I removed as many axes and unnecessary theme elements as possible to keep my plots simple and, hopefully, easily interpretable. Since I was using “fire” colors such as bright yellow and orange, especially in my circular plot, I plotted everything against a black background for more emphasis.\nColors: As I mentioned briefly above, I used a lot of bright reds, yellows, and oranges to simulate fire. I used a black background so that the bright colors are easily seen and look more fire-like. For my choropleth map, I am plotting negative and positive values, so I created a divergent color gradient. I used bright red to indicate large positive numbers (an increase in average number of fires) and blue to indicate large negative numbers (a decrease in average number of fires). I chose blue because the color is typically associated with coolness and water, which I believe are opposites of fire.\nTypography: The typeface I chose, Quicksand, had many font options available and is sans serif. This was ideal because it makes it easier for audiences to read, and I feel like it adds a casualness to the infographic that I hope will make it less intimidating to audiences that are less familiar with interpreting data visualizations.\nGeneral design: I made the overall title the largest size and additionally made the written takeaways from each plot a larger size so that they could not be missed. I limited my subtitles to only pertinent information and kept the takeaways concise to avoid information overload. I made the choropleth map large enough to serve both as a reminder that this data is about California and so that the audience can clearly interpret color differences.\nContextualization: The California map, colors used throughout, and the fire images all work together to contextualize the California wildfire data.\nCentering your primary message: I had so many ways I wanted to present this data, but I focused each of my plots on investigating change over time of either severity or frequency of fires. As written in my takeaway annotations, it is hard to say for sure, but it appears that California wildfires have increased in both frequency and severity since 1980.\nConsidering accessibility: The colors I used are colorblind-friendly and I ensured that all text and background colors meet or exceed the contrast ratio of 4.5:1. I have added alt text to my final infographic.\nApplying a DEI lens: The infographic was designed so that someone with little knowledge of California wildfires could understand if the fires are getting worse. I took a very broad approach by visualizing across the entirety of the state, but I would need to do more if this exploration were to be used to direct future actions related to wildfires as communities that are underrepresented are often the most vulnerable to these wildfires."
  }
]